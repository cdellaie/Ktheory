%\section{ Mayer-Vietoris exact sequences and controlled cutting and pasting}

\section{Mayer-Vietoris sequence in $K$-homology}

We first recall how to construct a Mayer-Vietoris element out of any pull back diagram of $C^*$-algebras. We fix an étale $\sigma$-compact groupoid.\\

Let $X$ be a locally compact space and let us decompose $X$ into two open sets $U_0$ and $U_1$. Consider the $C^*$-algebras $A=C_0(X)$, $A_j=C_0(U_j)$ where $U_{01}=U_0\cap U_1$, and $C$ the pull-back $\{(f_0,f_1) \in CA_0\oplus CA_1 \text{ s.t. } f_0(0)=0,f_1(1)=0,\text{ and } f_0(\frac{1}{2})=f_1(\frac{1}{2})\in A_{01}\}$, with the canonical morphisms $\alpha :C \rightarrow A$ and $\beta : C \rightarrow SA_{01}$. The latter is an homotopy equivalence, and the Mayer-Vietoris boundary is defined as the dotted arrow in the following commutative diagram
\[\begin{tikzcd}
KK^G_*(C,B) \arrow{r}{\beta^*}\arrow{d}{ \alpha^*}& KK^G_*(SA_{01},B)\arrow{d}{[\partial_{A_{01}}]\otimes -}\\
KK^G_*(A,B) \arrow[dotted]{r}{ [\partial_{MV}] \otimes}& KK^G_{*+1}(A_{01},B)\\
\end{tikzcd}\]
where $[\partial_{MV}]=[\partial_{A_{01}}]\otimes_{SA_{01}} [\beta]^{-1}\otimes_C [\alpha] = [\partial_{A_{01}}]\otimes_{SA_{01}} \alpha^*([\beta]^{-1}])\in KK^G_1(A_{01},A)$ and where the right vertical arrow is the Bott element $[\partial_{A_{01}}]\in KK_1^G(A_{01},SA_{01})$.\\

In proving the compatibility of the controlled assembly map with the Mayer-Vietoris sequence, the following lemma shows how to compute the image of 
the boundary of a $K$-cycle in term of its image.\\

Let $f : X\rightarrow [0,1]$ be a continuous function which is identically equal to $0$ on $X\backslash U_1 $ and identically equal to $1$ on $X\backslash U_1$. Let $A$ be a $G$-algebra and $E\in\mathcal E$. For any $p\in P_n^{\varepsilon,E}(A\rtimes_r G) $, define 
\begin{itemize}
\item[$\bullet$] $U_{f,p}(x) = e^{2i\pi f(x)}p(x) +1_n -p(x)$ if $x\in U_0\cap U_1$
\item[$\bullet$] $U_{f,p}(x) = 1_n$ elsewhere.
\end{itemize}
so that $U_{f,p}$ defines an element of $ U^{\varepsilon,E}_n(A\rtimes_r G)$.\\

\begin{lem}
Let $p\in P_n^{\varepsilon,E}(A\rtimes_r G)$ and $U_{f,p}\in U_n^{\varepsilon,E}(A_{01}\rtimes_r G)$ as above. Then
\[J^{\varepsilon, E}_G([\partial_{MV}]\otimes z ) [p,0]_{\varepsilon, E} \sim J^{\varepsilon, E}_G(z)[U_{f,p}]_{\varepsilon, E}\]
for any $G$-algebras $B$ and $B'$ and every $z\in KK^G(B,B')$.
\end{lem}

\begin{dem}
From $f$, define the following function $F$ on $U_0\times[0,\frac{1}{2}]\cup U_1\times [\frac{1}{2},1]\subseteq X\times[0,1]$: 
\begin{itemize}
\item[$\bullet$] $F(x,t)= 2t f(x)$ if $t\in [0,\frac{1}{2}]$,
\item[$\bullet$] $F(x,t)= 2t (f(x)+t-tf(x))-1$ if $t\in [\frac{1}{2},1]$.
\end{itemize} 
This allows to define $W_{f,p}(x,t)=e^{2i\pi F(x,t)}p(x)+1-p(x)$ which is a lift of $U_{f,p}$ in $U_n^{\varepsilon,E}( C \rtimes_r G)$ via $\alpha$.
But $s\in [0,1]\mapsto e^{2i\pi (sF(x,t)+(1-s)t)}p(x)+1-p(x)$ yields a homotopy of almost unitaries between $W_{f,p}$ and $e^{2i\pi t}p + 1-p$, so that $(\beta_G)_*[W_{f,p}]_{\varepsilon,E}=D_{A_{01}\rtimes_r G}^{SA_{01}\rtimes_r G} [p,0]_{\varepsilon,E}$.\\

Applying proposition \ref{Kasparov} gives : 
\[J_G([\partial_{MV}]\otimes z])[p,0]_{\varepsilon,E} \sim J_G(z)\circ J_G([\alpha])\circ J_G([\beta]^{-1}) \circ D_{A_{01}\rtimes_r G}^{SA_{01}\rtimes_r G} [p,0]  \]
and the previous line of thought entails that the right member is equal to $J_G(z)\circ J_G([\alpha]) \circ [W_{f,p}]_{\varepsilon,E} = J_G(z)[U_{f,p}]_{\varepsilon,E} $ because $(\alpha_G)_* [W_{f,p}]_{\varepsilon,E}=[U_{f,p}]_{\varepsilon,E} $.\\
\qed
\end{dem}

%%%%%%
%%%%%%
%%%%%%
At the level of controlled $K$-theory, Oyono-Oyono and Yu introduced (unpublished) a notion of Mayer-Vietoris pair in a filtered $C^*$-algebra $A$ weaker than that of a pull-back diagram. We introduce the notation for a controlled neighborhood as follows. Let $(A,\mathcal E)$ be a filtered $C^*$-algebra, $E\in\mathcal E$ and $\Delta$ be a closed linear subspace of $A_E$ stable by involution. Then the $E$-controlled neighborhood of $\Delta$, denoted by $C^* N_{\Delta}^{(E,E')}$, is defined as the $C^*$-algebra generated by $N_{\Delta}^{(E,E')} = \Delta + A_{E'}.\Delta +\Delta. A_{E'} + A_{E'}.\Delta.A_{E'} $ for every $E'\in\mathcal E$.

\begin{definition}
Let $(A,\mathcal E)$ be a filtered $C^*$-algebra and $E \in\mathcal E$. A $E$-controlled weak Mayer-Vietoris pair for $A$ is a quadruple $(\Delta_0,\Delta_1,A_0,A_1)$ such that for some constant $c>0$:\\

\begin{itemize}
\item[$\bullet$] $\Delta_j$ are closed linear subspaces of $A$, 
\item[$\bullet$] $A_j$ are sub-$C^*$-algebras of $A$ such that $A_j$ is $\mathcal E$-filtered by $(A_{E'}\cap A_j)_{E'\in\mathcal E}$ and $C^* N_{\Delta_j}^{(E,5.E)}\subseteq A_j$,
\item[$\bullet$] if $x\in M_n(A_{E'})$ for $E'\in\mathcal E$ such that $E'\subseteq E$ and any $n>0$ , there exists $x_j\in M_n(\Delta_j\cap A_{E'})$ such that $x=x_0+x_1$ and $||x_j||\leq c||x||$,
%\item[$\bullet$] $A_j$ is filtered by $(A_j\cap A_{E'})_{E'\in\mathcal E}$ and $C^* N_{\Delta_j}^{(E,5.E)}\subseteq A_j$
\item[$\bullet$] for every $\varepsilon >0$, if $x\in M_n(A_{0,E'})$, $y\in M_n(A_{1,E'})$ such that $||x-y||<\varepsilon$,  there exists $z\in M_n(A_{0,E'}\cap A_{1,E'})$ with $||z-x||<\varepsilon$ and $||z-y||<\varepsilon$. \\
\end{itemize}
\end{definition}

\begin{Expl} Let $G$ be an étale groupoid with compact base space and let $V\subseteq G^{(0)}$ be an open subset. For $E\in\mathcal E$, put :
\begin{itemize}
\item[$\bullet$] $V^E= \{r(g) : g\in G_{V}\cap E\}$,
\item[$\bullet$] $\Delta_V = C_0(G_{V}\cap E)$,
\item[$\bullet$] $G^{V,(E)}_V$ the subgroupoid generated by $G_V^V \cap E$.
\end{itemize} 
Let $V_0$ and $V_1$ be open subsets such that $G^{(0)} = V_0\ \cup \ V_1$. Denote $G_{V_j^E}^{V_j^E , (E)}$ by $G_j$. Then $(\Delta_{V_0},\Delta_{V_1}, C_r^*(G_0),C_r^*(G_1))$ is a $E$-controlled Mayer-Vietoris pair for $C^*_r (G)$. 
\end{Expl}

For example, take $G$ to be an étale groupoïd with proper length $l$, with compact base space $X$. The convolution algebra $C^*_r G$ is filtered by $(C_c(G_R))_{R>0}$, $G_R=l^{-1}[0,R)$. Fix $R>5r$. If $V$ is an open subset of $X$, set \\

\begin{itemize}
\item[$\bullet$] $V^R= \{r(g) : g\in G_V\cap G_R\}$,
\item[$\bullet$] $\Delta_V = C_0(G_V\cap G_R)$
\item[$\bullet$] $G_{V,R}^V = \langle G_V^V \cap G_R \rangle$\\
\end{itemize} 

then $(\Delta_{V_0},\Delta_{V_1}, C_r^*(G_0),C_r^*(G_1))$ is a $r$-controlled Mayer-Vietoris pair for $C^*_r G$ when $X=V_0\cup V_1$, and $G_j = G_{V_j^R}^{V_j^R , (R)}$.\\

The existence of a controlled Mayer-Vietoris pair is nice, because even if the $C^*$-algebra is simple, it can possess such a decomposition, and the following result gives a way to compute the $K$-theory analogous to the situation of a classical Mayer-Vietoris decomposition :

\begin{thm}
For every positive $c$, there exists a control pair $\rho_{MV}$ such that for any $\mathcal E$-filtered $C^*$-algebra $A$ and any $E\in\mathcal E$, if there exists a $E$-controlled Mayer-Vietoris pair $(\Delta_0,\Delta_1,A_0,A_1)$, then there exists a controlled morphism $D : \hat K_*(A)\rightarrow \hat K(A_0\cap A_1)$ such that the following sequence 
\[\begin{tikzcd}
\hat K_0(A_0\cap A_1 ) \arrow{r}& \hat K_0(A_0)\arrow{r}\oplus \hat K_0(A_1) & \hat K_0(A)\arrow{d}{D} \\
\arrow{u}{D}\hat K_1(A) &\arrow{l} \hat K_1(A_0)\oplus \hat K_1(A_1) & \arrow{l}\hat K_1(A_0\cap A_1) 
\end{tikzcd}\]
is $\rho$-exact at order $E$.
%where $D$ is a controlled Mayer-Vietoris boundary.\\
\end{thm}

To go back to our example, if $G^{(0)} = V_0\ \cup \ V_1 $, and with the same notations, we simulteanously have two sequences : \\
\begin{itemize}
\item[$\bullet$] the exact sequence in $K$-homology arising from the decomposition of the Rips complex into two open sets 
\[P_E(G) = P_E(G^{V_0^E,(E)}_{V_0^E}) \cup P_E(G^{V_1^E,(E)}_{V_1^E}) ,\] 
\item[$\bullet$] the controlled exact sequence in controlled $K$-theory arising from the controlled Mayer Vietoris pair $(\Delta_{V_0},\Delta_{V_1}, C_r^*(G_0),C_r^*(G_1))$. \\
\end{itemize}
The next step is to show that the controlled assembly map intertwines these two sequences. %The aim of this section is to show that the quantitative assembly maps respects these two exact sequences in a precise way.\\

%Actually, in this particular case, the quantitative Mayer-Vietoris exact sequence should hold at all orders, which would allows us to state a much stronger result, with more interesting applications : a Künneth formula for crossed product algebras of étale groupoids.\\

%\textbf{A remark :} There is a seemingly harmful parallel between the controlled Mayer-Vietoris decomposition and the nuclear dimension of the reduced $C^*$-algebra. Namely, to show that the pair satisfies the Mayer-Vietoris conditions, we make use of the completely positive map induced by 
%\[\left\{\begin{array}{lcr} C_c(G) &\rightarrow & C_c(G) \\ f &\mapsto & \phi_0\circ r\ . f .\ \phi_0\circ s\end{array}\right.\]   
%where $\phi_0$ is any continuous function $X\rightarrow [0,1]$ with support in $V_0$ which is $1$ on some compact $K\subseteq V_0$.\\
%Could we push the analogy further ? 

\section{Standard modules}

The aim of this section is to develop a notion of non-degenerate standard modules over a groupoid analogous to non-degenerate standard modules over coarse spaces. \\

Let us first recall the coarse case. Let $X$ be a discrete metric space with bounded geometry. 

\begin{definition}
A $X$-module is a Hilbert space $H_X$ equipped with a $*$-representation $\phi : C_0(X) \rightarrow \mathcal L(H_X)$. The $X$-module $(H_X,\phi)$ is said to be :\\

\begin{itemize}
\item[$\bullet$] standard if $\phi(C_0(X))H_X$ is dense in $H_X$,
\item[$\bullet$] non-degenerate if $\forall f \in C_0(X), \phi(f)\in \mathfrak K (H_X) \implies f=0$.
\end{itemize}
\end{definition}

The usefulness of n.d.s. $X$-modules comes from the following lemma :

\begin{lem}
Let $X$ and $Y$ be two discrete metric spaces with bounded geometry, and $h : X\rightarrow Y$ a coarse map. Then, for any two standard modules $H_X$ and $H_Y$ over $X$ and $Y$ respectively, there exists an isometry which covers $h$, i.e. for any $\epsilon >0$, there exists $V\in \mathcal L(H_X,H_Y)$ such that 
\[\text{supp }V \subseteq \{(x,y)\in X\times Y, d(h(x),y)<\epsilon\}.\]
\end{lem}

\textbf{Remark :} We can induce $V$ on the Roe algebras by $\forall T\in C^*(X,H_X), Ad_V(T) := V T V^* \in C^*(Y,H_Y)$, and the preceding lemma entails that \[(Ad_V)_* : K(C^*(X,H_X))\rightarrow K(C^*(Y,H_Y))\] only depends on the coarse class of $h$. We directly see that the $K$-theory of the Roe-algebras of $X$ do not depend on the standard modules if they are n.d.s. : one just need to take an isometry covering the identity. \\

We can actually show that taking the Roe algebra is a functor. Choose, for any coarse space $X$ a n.d.s. $X$-module $H_X$, and consider the category $Coarse$ of coarse spaces with morphisms coarse maps, and the category $KK$ with objects $C^*$-algebras, and morphisms defined by $KK$-theory, $Hom_{KK}(A,B)=KK(A,B)$. Then $ X \mapsto C^*(X,H_X) $ and $\left(h:X \rightarrow Y\right) \mapsto (Ad_V)_*\in KK(C^*(X,H_X),C^*(Y,H_Y))$ defines a functor $Coarse \rightarrow KK$, which does not depend on the choices $X\mapsto H_X$ being made.\\

We will focus ont the following result :

\begin{thm}
Let $X$ be a finite simplicial complex, and $B$ a $C^*$-algebra. There exists $\varepsilon_0\in (0,\frac{1}{4})$ such that for all $\varepsilon \in (0,\varepsilon_0)$, there exists $R_\varepsilon>0 $ s.t. 
\[\forall R\in (0,R_\varepsilon),\  Ind_{X,B}^{\varepsilon, R} : KK(C(X),B)\rightarrow K^{\varepsilon,R}(B\otimes \mathfrak K(H_X))\] 
is an isomorphism.
\end{thm}

We wish to prove a similar result for "nice" groupoids. Let us recall the definition of $G$-simplicial complex from \cite{TuBC2}.

\begin{definition}
Let $G$ be a locally compact groupoid. A $G$-simplicial complex of dimension less than $n$ is a triple $(Z,\Delta, p)$ where
\begin{itemize}
\item[$\bullet$] $Z$ is a locally compact space of vertices and $p: Z \rightarrow G^{(0)}$ a locally injective map, which is an anchor map for an action of $G$, 
\item[$\bullet$] $\Delta$ is a closed $G$-invariant subset of the probability measures $P(Z)$ on $Z$, equipped with the weak-$*$ topology, with the property that every element of $\Delta$ has a support contained in a fiber of $p$ and has at most $n+1$ elements. Such a support is call a simplex of $\Delta$. Moreover, if $\nu\in \Delta,\mu \in P(Z)$ and $supp(\mu)\subseteq supp(\nu)$ then $\mu\in \Delta$.
\end{itemize}
\end{definition}

The first step is to defined what is a s.n.d. $G$-module.

\begin{definition}
A s.n.d. $G$-module is a triple $(E,\phi,V)$ where $E$ is a $C_0(G^{(0)})$-algebra, $\phi : C_0(G^{(0)})\rightarrow \mathcal L(E)$ is a $*$-representation and $V$ is an action of $G$ on $E$ such that
\begin{itemize}
\item[$\bullet$] $E$ decomposes as a external tensor product $E\simeq E^{(0)}\otimes E^{(1)}$ of $G$-modules such that there exists $\phi : C_0(G^{(0)})\rightarrow \mathcal L(E^{(0)})$ and $\phi= \phi_0\otimes id_{E^{(1)}}$
\item[$\bullet$] No non-zero function of $C_0(G^{(0)})$ acts as a compact operator via $\phi_0$, and $\overline{\phi_0(C_0(G^{(0)}))E^{(0)} }= E^{(0)}$
\item[$\bullet$] For all compact subgroupoids $K$ of $G$, there exists an isomorphism of $K$-modules $\text{Res}_K^G E^{(1)} \simeq L^2(K)\otimes H_K$ where $H_K$ is a separable Hilbert space.
\end{itemize}
\end{definition}

Now we want to show the following :

\begin{lem}
Let $G$ be a locally compactly induced groupoid, and $E,E'$ any two s.n.d. $G$-modules, then for any compact subset $K$ of $G$, there exists an isometry $V\in \mathcal L(E,E')$ such that 
\[supp\ V \subseteq (s\times r)(K). \]
\end{lem}

\begin{dem}
Let $E$ a n.d.s. $G$-module, and decompose the base space $G^{(0)}$ into $G$-invariant subset which are locally induced by compact subgroupoids of $G$ :
\[G^{(0)} = \cup_{j=1}^J G\times_{K_j} U_j.\]
By the third hypothesis of being s.n.d., there exist a Hilbert space $H_j$ and an isomorphism of Hilbert modules $F_j :\text{Res}_{K_j}^G E^{(1)} \rightarrow  L^2(K_j)\otimes H_j$, but the induction $\text{Ind}_{K_j}^G L^2(G/K_j)\otimes L^2(K_j)\otimes H_j$ is non canonically isomorphic to $L^2(G)\otimes H_j$, so that $E$ is isomorphic to $E^{(0)}\otimes L^2(G)\otimes H_j$.\\
\qed
\end{dem}

\begin{cor}
Let $G$ and $G'$ two locally compactly induced groupoids, $E,E'$ two s.n.d. modules over $G$ and $G'$ respectively and $(Z,p,p')$ a generalized morphism from $G$ to $G'$ which respects condition ??. For any compact subset $K$, there exists an isometry $V\in \mathcal L(E,E')$ such that
\[supp\ V \subseteq (p\circ (p')^{-1}(s(K))\times r)(K). \]
\end{cor}
























 


