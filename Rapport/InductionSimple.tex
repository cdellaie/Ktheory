%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Induction and Restriction functors}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{definition} A subset $H\subseteq G$ is called a subgroupoid if :
\begin{itemize}
\item[$\bullet$] for every $x\in H^{(0)}$, $e_x\in H$,
\item[$\bullet$] for all $h,h'\in H $ such that $s(h') = r(h)$, $h'h \in H$,
\item[$\bullet$] if $h\in H$, $h^{-1}\in H$.
\end{itemize}
Then, the restriction of the multiplication, inverse, unit, target and source maps on $H$ defines a structure of groupoid on $H$ over $H^{(0)} = s(H)$. If $G$ is étale, $H$ is also étale. We will write $H< G$ to indicate that $H$ is a subgroupoid of $G$.
\end{definition}

In this section, we define for all subgroupoids $H < G$ induction and restriction transformations. Let $G$ be an étale groupoid and $H<G$. The action of $G$ on $C_0(G)$ given by 
\[\left\{ \begin{array}{rcl}
C_0(G) & \rightarrow & C_0(G) \\
f & \mapsto  & [x\in G^{s(g)}\mapsto f(gx) ]
\end{array}\right.\] 
is called left translation.\\

Let $A$ be a $H$-algebra, with action given by $\alpha : s^*A \rightarrow r^* A$. Consider the tensor product of $C(H^{(0)})$-algebras $C_0(G)\otimes_{C(H^{(0)})} A$. Left translation provides a structure of $G$-algebra on $C_0(G)\otimes_{C(H^{(0)})} A$. Define the induced $C(G^{(0)})$-algebra by :
%\[\text{Ind}_H^G (A) = \{f \in C_0(G,A) \text{ s.t. } h^{-1} f(gh) = f(g),\forall h\in H\}. \]
\[\text{Ind}_H^G (A) = \{f \in C_0(G)\otimes_{C(H^{(0)})} A \text{ s.t. } \alpha_{h^{-1}}(f_{hg}) = f_g,\forall h\in H,g\in G^{s(h)}\}. \]
Notice that $\text{Ind}_H^G A$ can be identified with the $G$-algebra of $H$-invariant element of $C_0(G)\otimes_{C(H^{(0)})} A$, which we will denote by $(C_0(G)\otimes A )^H$ for the remainder of the section.\\

%Let $A$ be a $H$-algebra, with action given by $\alpha : s^*A \rightarrow r^* A$. Put $\phi=r\circ \iota$ where $\iota : H^{(0)}\hookrightarrow G^{(0)}$ is the canonical inclusion, hence $\phi^*A = A\otimes_\phi C_0(G)$ is a $C(G)$-algebra . Define the induced $C(G^{(0)})$-algebra :
%\[\text{Ind}_H^G (A) = \{f \in C_0(G,A) \text{ s.t. } h^{-1} f(gh) = f(g),\forall h\in H\}. \]
%\[\text{Ind}_H^G (A) = \{f \in \phi^* A \text{ s.t. } \alpha_{h^{-1}}(f_{hg}) = f_g,\forall h\in H,g\in G^{s(h)}\}. \]
%Left translation defines an action of $G$ on $\text{Ind}_H^G A$, so that $\text{Ind}_H^G A$ is a $G$-algebra.\\

Let $E$ be a Hilbert $A$-module, endowed with an action $V\in\mathcal L_A(s^*E,r^*E)$ of $H$. Define the induced Hilbert module by :
%\[\text{Ind}_H^G (E) = \{f \in C_0(G,E) \text{ s.t. } h^{-1} f(gh) = f(g),\forall h\in H\}. \]
\[\text{Ind}_H^G (E) = \{f \in C_0(G)\otimes_{C(H^{(0)})} E \text{ s.t. } \alpha_{h^{-1}}(f_{hg}) = f_g,\forall h\in H,g\in G^{s(h)}\}. \]
Left translation defines an action of $G$ on $\text{Ind}_H^G E$, hence $\text{Ind}_H^G E$ is a $G$-equivariant Hilbert $\text{Ind}_H^G A$-module. As before, $\text{Ind}_H^G A$ can be identified with the $H$-invariant elements $(C_0(G)\otimes_{C(H^{(0)})} E)^H$.\\

Let $A$ and $B$ be two $H$-algebras. For all $(E,\pi,T)\in \mathbb E^G(A,B)$, define $\text{Ind}_H^G \pi$ and $\text{Ind}_H^G T$ as pointwise evaluation and multiplication by $\pi$ and $T$, i.e. $\text{Ind}_H^G T = T\otimes 1$ and $\text{Ind}_H^G \pi  = \pi\otimes id$.

\begin{definition}
For all subgroupoids $H<G$, let $A$, $B$ and $D$ be $G$-algebras and $A'$, $B'$ and $D'$ be $H$-algebras. Then, the map $(E,\pi,T)\mapsto ( \text{Ind}_H^G E, \text{Ind}_H^G\pi ,\text{Ind}_H^G T )$ induces an even homomorphism of $\Z_2$-graded abelian groups
\[\text{Ind}_H^G : KK_*^H(A',B')\rightarrow KK_*^G( \text{Ind}_H^G A', \text{Ind}_H^G B') \] 
called the induction transformation.\\
Moreover, by forgetting the action, we naturally have an even homomorphism of $\Z_2$-graded abelian groups 
\[\text{Res}_H^G : KK_*^G(A,B)\rightarrow KK_*^H( \text{Res}_H^G A, \text{Res}_H^G B) \] 
called the restriction transformation by restricting the action.\\
These two transformations respect the Kasparov product, i.e. 
\[ \text{Ind}_H^G(z\otimes z') = \text{Ind}_H^G(z)\otimes_{\text{Ind}_H^G(D')}\text{Ind}_H^G(z')\quad \forall z\in KK^H(A',D'),z'\in KK^H(D',B') \]
and 
\[ \text{Res}_H^G(z\otimes z') = \text{Res}_H^G(z)\otimes_{\text{Res}_H^G(D)}\text{Res}_H^G(z')\quad \forall z\in KK^G(A,D),z'\in KK^G(D,B) \]
The reader is refered to \cite{LeGall} for a proof.
\end{definition}   

Let $Z$ be a right $H$-space. Define on $Z\times_{p,r} G$ the following equivalence relation :
\[(z,g)\sim_H (z.h, h^{-1}g)\quad \forall z\in Z, h\in H^{p(z)},g\in G^{p(z)}.\]

Let $Z$ be a left $H$-space. Define on $G \times_{s,p} Z $ the following equivalence relation :
\[(g,z)\sim_H (gh^{-1}, h.z)\quad \forall z\in Z, h\in H_{p(z)},g\in G_{p(z)}.\]

\begin{definition}
The induced $G$-space of a left $H$-space $Z$ is defined as $ G\times_H Z = (G \times_{s,p} Z) / \sim_H$. 
\end{definition}

Notice that we have a natural identification between $\text{Ind}_H^G C_0(Z)$ and $C_0(G \times_H Z)$.\\

\begin{lem} \label{Restriction} Let $H$ be a compact open subgroupoid of $G$, and $V$ a $H$-space such that the anchor map $p : V\rightarrow H^{(0)}$ is locally injective. Then, for every $H$-algebra $A$ and every $G$-algebra $B$, the transformations $Res_H^G$ and $Ind_H^G$ induce an isomorphism of $\Z_2$-graded abelian groups :
\[RK^G( G\times_H V, B) \cong RK^H(V, Res_H^G B).\]
\end{lem}

\begin{dem} It is clear that induction followed by restriction is the identity.\\ 

For the converse, let $(E,\pi,T)\in \mathbb E^G(C_0(G\times_H V),B)$. The moment map is locally injective, hence, by lemma \ref{JLTform}, we can suppose that $T$ is self-adjoint $G$-equivariant and commutes with the action of $C_0(G\times_H V)$. As $H$ is open in $G$, $x\mapsto (e_{p(x)},x)$ is a topological embedding and $V$ can be seen as a $H$-invariant open subset in $G\times_H V$. Denote by $E_V$ the Hilbert $H$-invariant $B$-submodule of $E$ generated by 
\[\{\pi(f)\xi \ ,f\in C_0(V), \xi\in E\}.\]

Then $E_{V}$ is a $H$-equivariant Hilbert $Res_H^G(B)$-module, such that $E\cong Ind_H^G (E_V)$. Indeed, let $\{G_i\}_i$ be a cover of $G_{|H^{(0)}}$ by compact open bisections. For each $i$, let $\{H_{ij}\}_j$ be an open cover of $r^{-1}( s(G_i))\cap H$ by compact open bisections $H_{ij} \subseteq H$. Up to taking a subcover, we can suppose $s(G_i) = r(H_{ij})$, for every $i$ and $j$. Put $\tilde G_i = \coprod G_i \circ H_{ij}$, which is a $H$-invariant open subset of $G$, when taking right-translation of $H$ on $G$. Let $\{\phi_i\}_i$ be continuous functions $\phi_i : G\rightarrow [0,1]$ such that 
\[\sum_{i, h\in G^{s(g)}} \phi_i(gh) = 1\quad \forall g\in G \quad \text{ and } \quad supp \ \phi_i\subseteq G_i .\]
$C_0(\tilde G_i)$ is stable by the action of $H$ by left translation, hence $f\mapsto \phi_i . f$ induces a homomorphism 
\[\Big(C_0(G)\otimes_s E_V\Big)^H \rightarrow \left( C_0(\tilde G_i)\otimes_s E_V\right)^H .\] 
Moreover $C_0(\tilde G_i) = \bigoplus_j C_0(G_i\circ H_{ij})$, and the action $V\in \mathcal L_{s^*B}(s^* E, r^* E)$ induces a isomorphism
\[ E_{s(H_{ij})}=C_0(G_i\circ H_{ij})\otimes_s E \rightarrow C_0(G_i\circ H_{ij})\otimes_r E = E_{r(G_{i})}. \]
Combining these, we get an application 
\[\Psi_i : \Big(C_0(\tilde G_i)\otimes_s E_V\Big)^H \rightarrow C_0(\tilde G_i/H)\otimes_r E \]
for every $i$. Let us show that $\Psi_i$ is an isomorphism. As $\tilde G_i$ is a bisection, for every $x\in r(\tilde G_i)$, there exists a unique $g_i^x\in \tilde G_i$ such that $r(g_i^x)=x$. Hence the evaluation map induces an isomorphism $\left( C_0(\tilde G_j / H) \otimes_r E \right)_x \cong_{ev_{g_i^x}} E_x$. Let $x\in H^{(0)}$, and let $g^{i}_x$ the unique element of $\tilde G_i$ such that $s(g^{i}_x) = x$. We identify elements of $C_0(\tilde G_i)\otimes_s E_V)^H$ with continuous functions $f : \tilde G_i \rightarrow E_V$ such that $V_h(f(gh)_{s(h)})= f(g)_{r(g)}$ for any $g\in \tilde G_i$ and any $h\in H^{s(g)}$. Then 
\[ (\Psi_i)_x(f_x) = V_{g^{i}_x}\left( f(g^{i}_{x})_x \right)\quad \forall f\in \left( C_0(\tilde G_i)\otimes_s E_V\right)^H, \]
which is an isomorphism. Define $\Psi : Ind_H^G (E_V)\rightarrow E$ by $\sum_{i,g\in G_x}\phi_i \Psi_i$. Then 
\[\begin{array}{rl}
(\Psi)_x(f_x) & = \sum_{i,g}\phi_i(g)V_g(f(g)_{s(g)}) \\
		& = \sum_{i}\phi_i(g^i_x)V_{g^i_x}(f(g^i_x)_{s(g^i_x)}) \\
		& = \sum_{i, h\in G^x}\phi_i(g^i_x h)V_{g^i_x}(f(g^i_x)_{s(g^i_x)}) \\
		& = V_{g^i_x h}((f(g^i_x)_{s(g^i_x)})
\end{array}
\]
for every $f\in \left( C_0( G)\otimes_{C_0(H^{(0)})} E_V\right)^H$, every $i$ and any $x\in H^{(0)}$. The passage from the second line to the third uses the equivariance condition on $f$. Hence $\Psi$ is an isomorphism.\\ 

%isomorphism $Ind_H^G (E_V) \cong \bigoplus_i E_{r(G_i)} \cong E $.\\
%Then, $E = \oplus_{g\in G/H} E_{gV}$. Notice that $E_{V}$ is a $H$-equivariant Hilbert $Res_H^G(B)$-module, such that $E\cong Ind_H^G (E_V)$.
Moreover, $\pi$ is $G$-equivariant, hence $\pi(a) = Ind_H^G (\pi(a)_{|E_V} )$. As $[T,\pi(a)]=0$ for every $a\in C_0(G\times_H V)$, $T(E_V)\subseteq E_V$, and by $G$-equivariance, $T_{|E_V}$ determines $T$. Hence $T= Ind_H^G (T_{|E_V})$. Hence, if $z=[E,\pi,T]$ and $z_H =[E_V,\pi(a)_{|E_V},T_{|E_V}]$, we proved that $z = Ind_H^G( z_H)$, hence $Ind_H^G \circ Res_H^G (z)= z$.\\
\qed  
\end{dem}

%\begin{dem} 
%Let $A$ be a $H$-algebra, and $B$ a $G$-algebra.
%Let us first notice that the statement holds for equivariant $*$-homomorphisms. Namely,\\

%\begin{itemize} 
%\item[$\bullet$] if $\phi : Ind_H^G(A) \rightarrow B$ is a $G$-equivariant $*$-homomorphism, then $A = A\otimes C_0(G^{(0)})$ is a $H$-invariant subalgebra of $Ind_H^G(A)$, and the restriction $\phi_H$ of $\phi$ to $A$ is a $H$-equivariant $*$-homomorphism ;   
%\item[$\bullet$] if $\psi : A \rightarrow Res_H^G(B)$ is a $H$-equivariant $*$-homomorphism, then $\psi_G = \psi \otimes id_{C_0(G)}$ is a $H$-equivariant $*$-homomorphism.\\
%\end{itemize}

%And these constructions satisfy $(\phi_H)_G = \phi$ and $(\psi_G)_H = \phi$. Moreover, in $KK$-theory, one has $Res_H^G([\phi]) = [\phi_H]\in KK^H(Ind_H^G(A), B)$ and $Ind_H^G([\psi]) = [\psi_H]\in KK^H( A,Res_H^G (B))$.\\

%Let $z\in KK^H(Ind_H^G(A), B)$. As the restriction and induction transformations respect Kasparov products, by property $(d)$ and naturality of the boundary map, we can suppose that $z$ is the inverse in $KK$-theory of a $H$-equivariant $*$-homomorphism. Hence there exists a $H$-equivariant $*$-homomorphism $\phi : B \rightarrow Ind_H^G(A)$ such that $z\otimes_B [\phi] = 1_{Ind_H^G(A)}$ and $[\phi]\otimes_{Ind_H^G(A)} z  = 1_B$. Taking the induction, we get $Ind_H^G(z) = Ind_H^G([\phi])^{-1} = [\phi_G]^{-1}$, and $Res_H^G \circ Ind_H^G(z) = z$. We can similarly prove that $Ind_H^G \circ Res_H^G (z') = z'$ for every $z\in KK^G(A,Res_H^G(B))$.\\
%\qed
%\end{dem}

%\begin{prop} Let $H$ be an open compact subgroupoid of $G$, $U$ a $H$-space and $B$ a $H$-algebra. Then :
%\[Res_H^G : RK^G(G\times_H U , B)\rightarrow RK^H(U , Res_H^G(B)) \]
%is an isomorphism of $\Z_2$-graded abelian groups.
%\end{prop}

\subsection{Strongly proper groupoids}

We now introduce a property on groupoids that will entail a nice result on induction and restriction transformations at the level of $K$-homology.

\begin{definition}\label{StronglyProper}
A groupoid $G$ is said to be strongly proper if there exists an open cover $\mathcal U$ of $G^{(0)}$ such that, for all $U\in\mathcal U$, there exists a compact open subgroupoid $H_U$ of $G$ and a $H_U$-space $Z_U$ together with a $G$-equivariant homeomorphism
\[\psi_U : U \rightarrow G\times_{H_U} Z_U.\] 
An action of $G$ on a space $Z$ is said to be strongly proper if the groupoid $Z\rtimes G$ is strongly proper. A groupoid is said to be in the class $\mathcal C$ if every proper action of $G$ is strongly proper.
\end{definition}

\begin{rk}
For any strongly proper action of $G$ on a space $Z$, there exists an open cover of $Z$ by subsets of the type $V=G\times_H U$, where $H$ is a compact open subgroupoid and $U$ is a $H$-space. Then, by the previous section, we have an isomorphism
\[RK^G(V,B)\cong RK^H(U, Res_H^G (B))\]
for every $G$-algebra $B$. 
\end{rk}
%\begin{prop}
%Let $G$ be a strongly proper groupoid, and $\mathcal U$ an open cover satisfying the conditions of definition \ref{StronglyProper}. Then, the $G$-map $\psi_U $ extends to an isomorphism of groupoids
%\[\begin{tikzcd}
% G_{|U}\arrow{r}\arrow[shift right]{d}\arrow[shift left]{d} & Z_U\rtimes H_U \arrow[shift right]{d}\arrow[shift left]{d} \\
% U \arrow{r}{\psi_U} & G\times_{H_U} Z_U 
%\end{tikzcd}.\]
% Ce morceau bug sous windows : pourquoi ?
%\end{prop}

Let us give examples of groupoids in class $\mathcal C$. Recall the following definition from \cite{Renault} (page $20$).

\begin{definition}
A topological groupoid is said to be ample if it has a basis $G^a$ of neighborhoods consisting of compact open subsets.
\end{definition}

In \cite{paterson} (page $17$) is stated the following property. An étale groupoid $G$ is ample iff $G^{(0)}$ is totally disconnected. Hence the coarse groupoid of every coarse space $X$ is ample, its basis being $\beta X$.

\begin{prop}
Every ample groupoid is in class $\mathcal C$.
\end{prop}

%\begin{dem} The following argument was explained to me by Christian Bönicke.\\ 
%Let $G$ be an étale ample groupoid and $Z$ a $G$-space with proper action of $G$. Since $G$ is ample, we can cover $Z$ by compact open subsets. Let $\mathcal U$ be such an open cover. For each $U\in \mathcal U$, there exists $V\subseteq Z$ compact open such that $U= G.V$. Put $H= (r\times s)^{-1}(V,V)$, which is, by properness, a compact open subgroupoid of $Z\rtimes G$. Moreover, $U\cong G\times_H p(V)$ $G$-equivariantly. Hence $Z$ is covered by open subsets of the form $G\times_H V$, with $H$ being compact open subgroupoids and $V$ being $H$-spaces.\\ 
%\qed
%\end{dem}

\begin{dem} The following argument was explained to me by Christian Bönicke.\\ 
Let $G$ be an étale ample groupoid and $Z$ a $G$-space with proper action of $G$. Let $z\in Z$ and $V$ a compact neighborhood of $z$. Then, by properness, $L = \{(g,y)\in G\times_{s,p} Z \text{ s.t. } g.z\in V \}$ is compact, and its projection $K = \{g\in G \text{ s.t. } \exists  y\in Z_{s(g)} / (g,y)\in L\}$ is also compact. Put $x=p(z)$ and let $W\subseteq G^{(0)}$ be a compact open subset such that $x\in W$. Up to taking smaller neighborhood, we can suppose that $s^{-1}(W)\cap K$ is a finite reunion of bisections $G_1$, ... , $G_n$. For each $i$, let $g_i^x$ be the unique element of $G_i$ such that $s(g_i^x)=x$ and put
\[I = \{i\in [|1;n|] \text{ s.t. } g_i^x . z \neq z\}.\]
Up to taking smaller subsets, we can suppose that $i\in I$ implies $G_i. V \cap V = \emptyset$. Put 
\[H = \{g\in G_{|W} \text{ s.t. } \exists i\notin I, g\in G_i \}\]
and $V_0 = \cap_{i\notin I} G_i.V$. Then $H$ is a compact open subgroupoid of $G$, and $V_0$ is a $H$-invariant subset. Moreover, let $(g,v)$ and $(g',v')$ be in $G\times_{s,p} V_0$ such that $g.v=g'.v'$. Then $g^{-1}g'$ sends $v'\in V$ to $v\in V$, hence is in $H$. The map $G\times_{s,p} V_0\rightarrow G.V$ passes to the quotient and induces a $G$-equivariant topological embedding $G\times_H V_0 \rightarrow G.V$ such that $z$ is in the image. Hence, $z$ admits a neighborhood locally induced from a $H$-action, and $G$ is in the class $\mathcal C$.\\   
\qed
\end{dem}

\begin{rk}
Let $\Gamma$ be a discrete group. Then every proper action of $\Gamma$ on a space $Z$ is strongly proper by definition.
\end{rk}


%The author presently doesn't know of any other examples of strongly proper groupoids which are not ample.% Maybe looking into groupoids with finite asymptotic dimension. 

%Ample groupoids are example of locally induced groupoid. Recall that an étale groupoid is ample iff the open compact bisections form  a basis of the groupoid. Now take $U$ an open compact bisection, and set $H_U = \{ g\in G\text{ s.t. } gU\cap U \neq \emptyset \}$, which is a compact subgroupoid of $G$ that fulfills the condition.\\

%\begin{definition}
%The groupoid $G$ is said to be locally induced if there exists an open cover $\mathcal U$ of $G^{(0)}$ such that for all $U\in\mathcal U$, there exists a compact groupoid $H_U$ acting on $G_{|U}$ and an ismomorphism of groupoids $G_{|U }\simeq G_{|U}/ H_U \rtimes H_U$.  
%\end{definition}

%Since $G_{|U}/ H_U \rtimes H_U$ is Morita equivalent to $H_U$ and $G$ is Morita equivalent to the pull-back $G[\mathcal U]$, we have an isomorphism 
%\[KK^G(A,B) \simeq \prod_{U\in\mathcal U} KK^{H_U}(\phi^* A,\phi^* B).\]




