\section{Preliminaries on topological groupoids}

\begin{definition}
A topological groupoid is the data of 
\begin{itemize}
\item[$\bullet$] two topological spaces $G$ and $G^{(0)}$, called respectively the space of arrows, and the unit space,
\item[$\bullet$] a topological embedding $e: G^{(0)}\rightarrow G; x\mapsto e_x$ called the unit map,
\item[$\bullet$] source and range maps $r,s : G\rightarrow G^{(0)}$ which are continuous, surjective, and satisfy $r\circ e = s\circ e = Id_{G^{(0)}}$,
\item[$\bullet$] a continuous multiplication map $m : G^{(2)}=G\times_{s,r}G\rightarrow G; (g,g')\mapsto gg'$ such that $(gg')g''=g(g'g'')$ for all triple $g,g',g''$ that are composable, and $g e_{s(g)} = e_{r(g)} g =g$,
\item[$\bullet$] an involutive map $\text{inv} : G\rightarrow G: g\mapsto g^{-1}$ which is continuous and such that $s\circ \text{inv} = r$, $r\circ \text{inv} = s$ and $\forall g\in G, gg^{-1}=e_{s(g)} \text{ and }g^{-1}g=e_{r(g)}$. This map is called the inverse map.
\end{itemize} 
\end{definition}

\begin{definition}
Let $G$ be a locally compact groupoid, i.e. a topological groupoid locally compact as a topological space.\\
$G$ is said to be étale if the range map $r:G\rightarrow G^{(0)}$ is a local homeomorphism.\\
$G$ is said to be principal if $r\times s : G\rightarrow G^{(0)}\times G^{(0)}$ is injective, transitive if $r\times s $ is surjective, and proper if $r\times s $ is a proper map. 
\end{definition}

If $G$ is étale, then any $g\in G$ has an open neighborhood $U$ such that $r$ and $s$ are injective on $U$. The element $g$ defines in this way a partial homeomorphism $\alpha_U = r\circ (s_{|U})^{-1} : s(U)\rightarrow r(U)$. Such open sets $U$ where $r$ and $s$ are injective are called bisections.\\ %The set of bisections is naturally an inverse semi-group \cite{paterson}.\\

For $U,V\subseteq G^{(0)}$, we will use the notations $G_U=s^{-1}(U)$, $G^V=r^{-1}(V)$ and $G_U^V=s^{-1}(U)\cap r^{-1}(V)$. If one of the subsets is reduced to a single point, we will use $G_x=G_{\{x\}}$, etc. We will write $G_{|U}$ for $G_U^U$. It is a subgroupoid of $G$.\\

A Haar system on $G$ is a family of borelian measures $(\lambda^x)_{x\in G^{(0)}}$ such that 
\begin{itemize}
\item[$\bullet$] the support of $\lambda^x$ is $G^x$, 
\item[$\bullet$] the map $G^{(0)} \rightarrow \C; x\mapsto \int_{G^x} f d\lambda^x$ is continuous for all $f\in C_c(G)$,
\item[$\bullet$] for all $f\in C_c(G)$ and $g\in G$, $\int_{G^{r(g)}} f(h) d\lambda^{r(g)}(dh)= \int_{G^{s(g)}} f(gh) \lambda^{s(g)}(dh)$ holds.
\end{itemize}

If the groupoid is étale, a natural Haar system is the counting measure on the discrete fibers, i.e. $\lambda^x(A) = |A\cap G^x|$ for all $A\subseteq G$.\\

Here are classical examples of groupoids.

\begin{Expl}[Groups and spaces] Any group $G$ is a groupoid over a point $G^{(0)}=*$. $G$ is étale as a groupoid if it is a discrete group. A topological space is also a groupoid over itself, the only arrows being the units over the points : $G^{(0)} = X = G$, $s=r=id_X$, it is always étale.
\end{Expl}

\begin{Expl}[Pair groupoid] Let $X$ be a set, and consider $G=X\times X$ with base space $G^{(0)}=X$ and projection maps as target and source $s=pr_1, r=pr_2$. Composition is given by $(x,y)(y,z)= (x,z)$, and one can easily check that $e_x=(x,x)$ and $(x,y)^{-1} = (y,x)$. $X\times X$ is étale if $X$ is discrete.
\end{Expl}

\begin{Expl}[Equivalence relations] More generally, consider an equivalence relation $R \subseteq X\times X$ on a topological space $X$. It naturally has a structure of topological groupoid, as a subgroupoid of $X\times X$. 
\end{Expl}

\begin{Expl}[Pull-back]
Let $X$ be a topological space and $f : X\rightarrow G^{(0)} $ a continuous map. The pull-back groupoid of $G$ along $f$, denoted $G[X]$, is defined as $\{(x,g,y)\in X\times G \times X \text{ s.t. }g\in G_{f(x)}^{f(y)}\}$, with base space $X$. A particular example is given by considering an open cover $\mathcal U=(U_j)$ of $G^{(0)}$. Let $p : \coprod_{j} U_j \rightarrow G^{(0)}$ be the natural projection. Then $G[\mathcal U]$ denotes the pull-back of $G$ along $p$.
%We define $G[\mathcal U]$ as the topological groupoid obtained as the set of triples $(U,g,V)$ such that $s(g)\in U$ and $r(g)\in V$ with base space the groupoid of the equivalence relation defined by $g\sim g'$ if and only if $p(g)=p(g')$. It is convient to represent this groupoid as the set of triples $(U,g,V)$ such that $s(g)\in U$ and $r(g)\in V$
\end{Expl}

\begin{Expl}[Action groupoid] Let $G$ be a group acting on a topological space $X$ by homeomorphisms. Define the groupoid $X\rtimes G$ as the topological space $X\times G$ over the base space $X$, endowed with the maps $s(x,g)=x$ and $r(x,g)=g.x$. The unit map will be given by $x\mapsto (x,e_G)$ and the inverse by $(x,g)^{-1} = (g.x , g^{-1})$. This groupoid is called the action groupoid. It is étale when $G$ is a discrete group.  
\end{Expl}

These examples show how the notion of topological groupoid interpolates between a group and a space. However, other examples of interesting groupoids abound in analysis and geometry. For example, we will define later a so called Coarse Groupoid associated to any Coarse Space, after \cite{SkTuYu}, whose importance cannot be emphasized enough to our approach to the Coarse Baum-Connes conjecture.\\

Other examples includes the holonomy groupoid of a foliation \cite{connesfoliations}, Lie groupoids \cite{paterson}, etc. One of the reasons groupoids are such famous objects in noncommutative geometry is that we can still do analysis on it. According to the general philosophy of Connes \cite{Connes94}, groupoids encode geometric situations and remain available to analysis, even when the situation is so pathological that classical tools become trivial. For example, when confronted to a group action, considering the convolution algebra of the principal action groupoid can be a substitute to the studying the quotient space. It turns out that, when the action is free and proper, the envelopping $C^*$-algebra is Morita equivalent to $C_0(X/G)$, which represent the quotient space by Gelfand duality. However, when the quotient is %badly behaved
singular, the envelopping $C^*$-algebra still carries usefull information, even if the quotient  is such that $C_0(X/G) \cong \C$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Actions of groupoids}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{definition}
A left action of $G$ on a topological space $Z$ is given by a continuous map $p : Z \rightarrow G^{(0)}$, called the anchor map, and a map $\alpha : G\times_{s,p} Z \rightarrow Z $ such that :
\begin{itemize}
\item[$\bullet$] $\alpha(g',\alpha(g,z)) = \alpha(g'g,z)$ whenever $(g,g')\in G^{(2)}$ and $p(z)=s(g)$,
\item[$\bullet$] $p(\alpha(g,z))= r(g)$
\item[$\bullet$] $\alpha(e_{p(z)},z)=z$
\end{itemize} 
We will use the notation $\alpha(g,z) = g.z$ when the action is clear from the context, and $Z$ will then be referred as a (left) $G$-space.\\

A right action of $G$ on a topological space $Z$ is given by a continuous map $p : Z \rightarrow G^{(0)}$, again called the anchor map, and a map $\alpha : Z\times_{p,r} G \rightarrow Z $ such that :
\begin{itemize}
\item[$\bullet$] $\alpha(\alpha(z,g),g') = \alpha(z, gg')$ whenever $(g,g')\in G^{(2)}$ and $p(z)=r(g)$,
\item[$\bullet$] $p(\alpha(z,g))= s(g)$
\item[$\bullet$] $\alpha(z,e_{p(z)})=z$
\end{itemize} We will use the notation $\alpha(g,z) = z.g$ when the action is clear from the context.\\ 
\end{definition}

A left action $(Z,p,\alpha)$ is said to be 
\begin{itemize}
\item[$\bullet$] proper if $id_Z \times \alpha : (g,z) \mapsto (z,g.z) $ is proper as a continous map,
\item[$\bullet$] free if $\alpha(g,z)=z \Rightarrow g=e_{p(z)} $.
\end{itemize}
For any subset $V \subseteq Z$, we use the notation $G.V$ for the orbit of $V$ under the action of $G$, i.e. $G.V = \{g.v : v\in V, g \in G_{p(v)}\}$. Similarly, we define these notions for right actions.\\

Let $G$ be a locally compact $\sigma$-compact Hausdorff groupoid. A cutoff function for $G$ is a continuous function $c : G^{(0)} \rightarrow \R_+$ such that :
\begin{itemize}
\item[$\bullet$] for all compact subsets $K\subseteq G^{(0)}$, $\text{supp }(c)\cap s(G^K)$ is compact,
\item[$\bullet$] for all $x\in G^{(0)}$, $\int_{g\in G^x} c(s(g)) \lambda^x(dg) = 1$.
\end{itemize}

We recall the following proposition.

\begin{prop}[\cite{TuNovikov}]
A locally compact $\sigma$-compact Hausdorff groupoid is proper iff there exists a cutoff function for $G$. 
\end{prop}

Let $Z$ be a right $G$-space. Define :
\begin{itemize}
\item[$\bullet$] $(Z\rtimes G)^{(0)} = Z$, $Z\rtimes G = Z\times_{r,p} G$ as a topological space,
\item[$\bullet$] $u_{z}= (z,e_{p(z)})$, $ s(z,g) = z$ and $r(z,g)=z.g$, 
\item[$\bullet$] if $y = x.g$, $(x,g)(y,g')= (x,gg') $ and $(x,g)^{-1} = (x.g,g^{-1})$.
\end{itemize}

These maps define a structure of toplogical groupoid on $Z\rtimes G$. It is called the crossed product groupoid of $Z$ by $G$. It is étale if $G$ is.\\

We present now an important class of $G$-spaces called $G$-simplicial complexes. The reader is referred to \cite{TuBC2} for details. 

\begin{definition}
A map between two topological spaces $f : X\rightarrow Y$ is said to be locally injective if there exists an open cover $\mathcal U$ of $X$ such that, for all $U\in \mathcal U$, $f_{|U}$ is injective.
\end{definition}

\begin{definition} \label{Gcomplex}
Let $n\in\N$. A $G$-simplicial complex of dimension $\leq n$ is a pair $(X,\Delta)$ where :
\begin{itemize}
\item[$\bullet$] $X$ is a locally compact proper $G$-space, called the space of vertices, such that the anchor map $p : X\rightarrow G^{(0)}$ is locally injective;
\item[$\bullet$] $\Delta$ is a closed $G$-invariant subset of the space of measures on $X$, denoted $M_X$, endowed with the weak $*$-topology. Moreover, $\Delta$ contains only probability measures and satisfies :
\begin{itemize}
\item[$\bullet$] for all $\eta\in\Delta$, there exists $x\in G^ {(0)}$ such that $\text{supp }\eta \subseteq p^{-1}(x)$ and $|\text{supp }\eta|\leq n+1$,
\item[$\bullet$] if $\eta' \in \Delta$ and $\eta\in M_X$ such that $\text{supp }\eta \subseteq \text{supp }\eta'$, then $\eta\in \Delta$.
\end{itemize}
For $\eta\in \Delta$, $\text{supp }\eta$ is called a simplex, or a $j$-simplex when $|\text{supp }\eta | = j$.
\end{itemize}
The complex is said to be typed if there exists a finite space $T$ and a $G$-invariant continuous map $\tau : X\rightarrow T$ such that, for every simplex $S$, $\tau_{|S}$ is injective.  
\end{definition}

For any typed proper $G$-compact $G$-simplicial complex $(X,\Delta)$ of dimension $\leq n$, one can decompose it into its $n$-skeleton $Z_0\subseteq Z_1 \subseteq ... \subseteq Z_n$, where each $Z_j$ is a closed $G$-invariant subset of $\Delta$ such that :
\begin{itemize}
\item[$\bullet$] for all $\eta \in Z_j \setminus Z_{j-1}$, $|\text{supp }\eta|= j$,
\item[$\bullet$] $Z_j \setminus Z_{j-1}$ is $G$-equivariantly homeomorphic to $\mathring\sigma_j \times \Sigma_j$, where $\mathring\sigma_j $ is the interior of the standard simplex of dimension $j$, and $\Sigma_j$ is the subspace of centers of $j$-simplices.
\end{itemize}

\begin{definition}
Let $(X,\Delta)$ be a $G$-simplicial complex of dimension $\leq n$. Its barycentric subdivision is the $G$-simplicial complex $(S,\Delta_S)$ of dimension $\leq n$ defined by :
\[S = \left\{ \frac{1}{|\text{supp } \eta|}\sum_{x\in \text{supp } \eta} \delta_x\ ,\eta\in \Delta \right\} \subseteq \Delta ,\]
i.e. the space of vertices $S$ contains $X$ plus the barycentric center of any simplex of $\Delta$, and $\Delta_S $ satisfies that $\sigma = \{ \eta_0, ...,\eta_k\}$ is a simplex in $\Delta_S$ iff $\{\text{supp }(\eta_0),...,\text{supp }(\eta_k) \}$ is totally ordered for the inclusion. %$\cup_{0 \leq j \leq k}\text{ supp }(\eta_j)$ is a simplex of $\Delta$.
\end{definition}

This construction shows that, up to replacing a $G$-simplicial complex of dimension $\leq n$ by its barycentric subdivision, we can always suppose that it is a typed $G$-simplicial complex of dimension $\leq n$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{$G$-algebras and crossed products}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This paragraph describes what is an action of a topological groupoid on a $C^*$-algebra, and how to construct the reduced crossed-product out of the action.

\begin{definition}
Let $X$ be a topological space. A $C(X)$-algebra is a $C^*$-algebra together with a $*$-homomorphism $\theta : C_0(X)\rightarrow Z(\mathcal M(A))$ such that $\overline{\theta (C_0(X)) A} = A$. The couple $(A,\theta)$ is then called a $C(X)$-structure.
\end{definition} 

If $f : X\rightarrow Y$ is a continuous map between locally compact spaces, and $A$ a $C(Y)$-algebra, then $f$ induces a $C(X)$-structure on $A$ by $f^* : C(Y) \rightarrow C_b(X); g\mapsto g\circ f$. Define $f^* A = A \otimes_{f^*} C_0(X)$ the resulting $C(X)$-algebra. For details on tensor products of $C(X)$-algebras, see \cite{LeGall} for instance. As a particular case, one gets the notion of a fiber of a $C(X)$-algebra : for $x\in X$, $A_x = ev_x^* \ A$ is called the fiber over $x$, where $ev_x$ is the inclusion of $x$ in $X$. It is convenient to see $A_x$ as $A/ (I_x .A)$ where $I_x$ is the ideal ker $(ev_x : C_0(X) \rightarrow \C)$. Moreover we can describe the fibers of $f^*A$ : $(f^*A)_x \cong A_{f(x)}$ for all $x\in X$.\\

A homomorphism between two $C(X)$-algebras $\alpha : A\rightarrow A'$ is a $*$-homomorphism which commutes with the action of $C_0(X)$, i.e. $\alpha(\theta(f)a)=\theta'(f)\alpha(a)$ for all $a\in A,f\in C_0(X)$. Its fibers are defined unambiguously by $\alpha_x = id_\C \otimes_{ev_x} \alpha$.\\

Notice that, if $A$ is a $C(G^{(0)})$-algebra, then $s^* A = A \otimes_s C_0(G)$ and $r^* A = A \otimes_r C_0(G)$ are $C(G)$-algebra with fibers $(s^*A)_g \cong A_{s(g)}$ and $(r^*A)_g \cong A_{r(g)}$ respectively, for all $g\in G$.

\begin{definition}
An action of a groupoid $G$ on a $C^*$-algebra $A$ is a triple $(A,\theta,\alpha)$ where $(A,\theta)$ is a $C(G^{(0)})$-structure and $\alpha : s^* A \rightarrow r^* A$ is an isomorphism of $C(G)$-algebras such that $\alpha_{gg'}= \alpha_g\circ \alpha_{g'}$ for all $(g,g')\in G^{(2)}$. Such an action will be called a $G$-algebra. 
\end{definition} 

\begin{definition}
Let $A$ and $B$ be two $G$-algebras, with action $\alpha$ and $\beta$ respectively. A $G$-equivariant $*$-homomorphism $\phi :A \rightarrow B$ is a morphism of $C(G^{(0)})$-algebra which intertwines the action, i.e. such that $(r^*\phi)(\alpha(a) ) =\beta((s^*\phi)(a))$ for every $a\in s^* A$.
\end{definition} 

If $A$ is a $G$-algebra, and $U \subseteq G^{(0)}$ is an open subset, recall from \cite{LeGall} that the restriction $A_U$ is defined as $\eta^* A = C_0(U) \otimes_\eta A$ where $\eta : C_0(U) \hookrightarrow C_0(G^{(0)})$ is the canonical inclusion. If $U\subseteq G$ is an open subset, we can define in a similar way $A_U$ as $C_0(U) \otimes_r A$.\\
%Let $F= G^{(0)}\backslash U$. As $A_U$ is naturally embedded into $A$, define $A_F$ to be the complementary of $A_U$. \\

The space of continuous sections with compact support is defined as :
\[C_c(G,A) = \cup_{U\in \mathcal E} A_U,\]
where $U$ runs through the open relatively compact subsets of $G$. It is naturally an involutive algebra with the convolution product
\[\phi\ast \psi (g) = \int_{G^{r(g)}} \phi(h)\psi(h^{-1}g)\lambda^{r(g)}(h).\] 

\begin{rk}
Another possible definition of $C_c(G,A)$ would be to take a tensor product of Fréchet algebras $C_c(G)\otimes A$, which gives a Fréchet algebra. Even if this definition seems more elegant, this would require more definitions on Fréchet $G$-algebras, which we do not want to dive into.  
\end{rk}

%Let $E$ be a compact subset of $G$. The space of continuous sections with support in $E$ is defined as $A_E$. Then 
%\[C_c(G,A) = \cup_{E\in \mathcal E} A_E\]
%is called the space of continuous sections with compact support. It is naturally a $*$-algebra with the convolution product
%\[\phi\ast \psi (g) = \int_{G^{r(g)}} \phi(h)\psi(h^{-1}g)\lambda^{r(g)}(h).\] 

%If $f\in C_c(G,A)$, define $\lambda(f)\in \mathcal L(L^2(G,A))$ as the convolution operator 
%\[\lambda(f)\eta = f\ast \eta\]
%and the reduced norm as $||f||_r= ||\lambda(f)||_{\mathcal L(L^2(G,A))}$.

Let $g\in G$ and $f\in C_c(G,A)$. Choose an open relatively compact subset $U\subseteq G$ which contains supp $f$. We can define $f(g)$ as $1\otimes_{ev_g} f \in \C \otimes_{ev_g} C_0(U)\otimes_\eta A\cong A_{s(g)}$. This jusitifies the name "continuous sections" for $C_c(G,A)$. \\

Let $A$ be a $G$-algebra and $x\in G^{(0)}$. As the groupoid $G$ is étale, $G_x$ is discrete and $l^2(G_x)$ is a separable Hibert space with dimension the cardinality of $G_x$. Define $l^2(G_x,A)$ as the $A_x$-Hilbert module $l^2(G_x)\otimes A_x$. We denote by $||\cdot||_2$ the norm induced by the inner product on $l^2(G_x,A)$ i.e. 
\[ \begin{array}{c}
\langle \xi,\eta\rangle_{A_x}= \sum_{g\in G_x} \xi(g)^* \eta(g),\\
||\xi||_2= ||\langle \xi,\xi \rangle||^\frac{1}{2} 
\end{array}\] 
for all $\xi,\eta\in l^2(G_x,A)$.\\

Define, for $f\in C_c(G,A)$, the reduced norm as 
\[||f||_r= \sup_{x\in G^{(0)}}\{ ||f\ast \xi||_2 : \xi\in l^2(G_x,A) \text{ s.t. } ||\xi||_2\leq 1\}.\]


\begin{definition}
The reduced crossed product $A\rtimes_r G$ is defined as the completion of $C_c(G,A)$ under the reduced norm.
\end{definition}

When $G$ is étale, $G^{(0)}$ is open in $G$, hence $A$ is a sub-$C^*$-algebra of $A\rtimes_r G$. For every $G$-equivariant $*$-homomorphism $\phi : A \rightarrow B$, we denote by $\phi_G$ the $*$-homomorphism $id_{C_0(G)}\otimes\phi : A\rtimes_r G \rightarrow B\rtimes_r G $. It is the unique $*$-homomorphism extending $\phi$. Moreover, the rule $\phi \mapsto \phi_G$ is functorial. 

% Propriete, fonctorialite etc....

\subsection{Equivariant Hilbert modules}
% A FINIR
Let $B$ be a $G$-algebra, with action $\beta$, and $E$ a $B$-Hilbert module. As earlier, we can define the fiber $E_x$ of $E$ over $x\in G^{(0)}$. Define $s^* E = E \otimes_s C_0(G)$ and $r^* E = E \otimes_r C_0(G)$ which are $s^*B$ and $r^*B$-Hilbert modules respectively, with fibers $(s^* E)_g \cong E_{s(g)}$ and $(r^* E)_g \cong E_{r(g)}$ for all $g\in G$. We can endow $r^*E$ with a structure of $s^* B$-Hilbert module with the help of the isomorphism $\beta^{-1} : r^* B\rightarrow s^* B$.

\begin{definition}
An equivariant Hilbert $B$-module is a Hilbert $B$-module $E$ together with an unitary $V\in\mathcal L_{s^* B}(s^*E ,r^* E)$ such that $V_gV_{g'} = V_{gg'}$ for all $(g,g')\in G^{(2)}$. If the underlying $G$-algebra is clear, we will often abbreviate $G$-equivariant Hilbert $B$-module by $G$-module.
\end{definition}

\begin{Expl} Define $L^2(G)$ as the completion of $C_c(G)$ seen as a pre-Hilbert $C_0(G^{(0)})$-module with the $C_0(G^{(0)})$-valued inner product 
\[\langle \xi ,\eta\rangle (x) = \sum_{g\in G^x} \xi(g^{-1})^*\eta(g^{-1}) \quad \forall \xi,\eta\in C_c(G).\]
Its fibers are isomorphic to $l^2(G^x)$, and the action $\lambda : s^*L^2(G) \rightarrow r^* L^2(G)$ is given by left translation, i.e. if $\xi\in l^2(G^{s(g)})$, then
\[(\lambda_g\xi)(h) = \xi(g^{-1}h)\quad \forall h\in G^{r(g)}.\]
\end{Expl}

\begin{Expl} Let $B$ be a $G$-algebra, the $C(G^{(0)})$-structure being given by $\theta : C_0(G^{(0)})\rightarrow Z(\mathcal M(B))\subseteq \mathcal L_B(B)$. The $G$-module $L^2(G,B)$ is defined as the tensor product $ L^2(G)\otimes_\theta B$. Its fibers are $l^2(G^x,B)$ and the action is given by $\lambda\otimes id_{B}$.
\end{Expl}

\begin{Expl} More generally, let $B$ be a $G$-algebra and $E$ be a $B$-module, with $C(G^{(0)})$-structure given by $\theta : C_0(G^{(0)})\rightarrow Z(\mathcal M(B))\subseteq \mathcal L_B(B)$. The $G$-equivariant $B$-Hilbert module $L^2(G,E)$ is defined as the tensor product $ L^2(G)\otimes_\theta E$.
\end{Expl}

\begin{rk}
We could alternatively have defined, for $A$ a $G$-algebra, $A\rtimes_r G$ as a subalgebra of $\mathcal L_A(L^2(G,A))$. Indeed, any $f\in C_c(G,A)$ acts as a convolution operator on $L^2(G,A)$ :
\[(\lambda(f)\xi)(h) = \sum_{g\in G^x} f(g)\alpha_g(\xi(g^{-1} h))\quad \forall \xi\in L^2(G,A),g,h\in G^x,\]
and $||f||_{r} = ||\lambda(f)||_{\mathcal L_A (L^2(G,A))}$.
\end{rk}

\begin{lem}[Equivariant stabilization lemma \cite{LeGall}] \label{GStabilization} Let $E$ be a countably generated $G$-equivariant $B$-Hilbert module, then there exists an $G$-equivariant isomorphism of Hilbert module $E \oplus H_B \cong H_B$.
\end{lem}

There exists an equivariant version of the generalized theorem of Stinespring in the setting of groupoids. It was proven by JL. Tu in \cite{TuNovikov}.

\begin{thm}[Kasparov-Stinespring \cite{TuNovikov}] \label{GKasparovStinespring} Let $A$ and $B$ be $G$-algebras with $A$ separable and $B$ unital. Let $\Psi : A \rightarrow B$ be a completely positive $G$-equivariant map. Then, there exists a countably generated $G$-equivariant Hilbert $B$-module $E$ and a $G$-equivariant $*$-homomorphism $\pi : A \rightarrow \mathcal L_B (B\oplus E)$ such that
\[\Psi( a) = P \pi(a) P \quad \forall a\in A,\]
where $P\in\mathcal L_B(B\oplus E)$ is the $G$-equivariant projection on the $B$ factor. The statement remains true when $B$ is non unital by replacing $\mathcal L_B (B\oplus E)$ by $\mathcal L_{\tilde B} (\tilde{B}\oplus E)$.
\end{thm}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Equivariant $KK$-theory}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

From now on, all the groupoids considered are locally compact and $\sigma$-compact.\\

In \cite{LeGall}, Le Gall defined, for any locally compact groupoid $G$, and $G$-algebras $A$ and $B$, $\Z_2$-graded abelian groups $KK^G(A,B)$ generalizing Kasparov's equivariant $KK$-theory for a locally compact group. Elements of $KK^G(A,B)$ are defined as equivalence classes of triples $(E,\pi,T)$ that we will call $K$-cycles.

\begin{definition} A $K$-cycle is a triple $(E,\pi,T)$ where :
\begin{itemize}
\item[$\bullet$] $E$ is a right $\Z_2$-graded $B$-Hilbert module, equipped with a unitary action of $G$, i.e. an even unitary $V\in\mathcal L_B(s^*E,r^*E)$ such that $V_g V_{g'} = V_{gg'}$ for all $(g,g')\in G^{(2)}$,
\item[$\bullet$] $\pi : A\rightarrow \mathcal L_B(E)$ is a $G$-equivariant $*$-homomorphism whose image is contained in even operators, and we will often write $a$ instead of $\pi(a)$,
\item[$\bullet$] $T\in\mathcal L_B(E)$ is an odd bounded $B$-linear operator satifying the $K$-cycle relations i.e. $[a, T]$, $a(T-T^*)$, $a(T^2-1)$ are compact operators in $\mathfrak K_B(E)$ and $a(r^* T -V s^*T V^*)$ is a compact operator in $\mathfrak K_{r^* B}(r^* E)$ for all $a\in A$.
\end{itemize} 
The set of such $K$-cycles is denoted by $\mathbb E^G(A,B)$.
\end{definition}

\begin{rk} The $*$-homomorphism $\pi$ is $G$-equivariant in the following sense : \[(r^*\pi)(\alpha(s^*a)) = V \ (r^*\pi)(r^*a) \ V^*\] 
for every $a\in A$. By convention, for every $G$-equivariant Hilbert module $E$ with action $V$, $\mathfrak K_B(E)$ will be endowed with a $G$-algebra structure given by $Ad_V(T) = VTV^*$.  
\end{rk}

\begin{definition}
Two $K$-cycles $(E,\pi,T)$ and $ (E',\pi',T')$ in $\mathbb E^G(A,B)$ are homotopic if there exists $ (\tilde E,\tilde \pi,\tilde T) \in\mathbb E^G(A,B[0,1])$ such that $(\tilde E_0,\tilde \pi_0,\tilde T_0)\simeq (E,\pi,T)$ and $(\tilde E_1,\tilde \pi_1,\tilde T_1)\simeq (E',\pi',T')$. The action on $B[0,1]$ is the action obtained as the tensor product of the action on $B$ and of the trivial action on $C[0,1]$.
\end{definition}

\begin{definition} $KK_0^G(A,B)$ is defined as the quotient of $\mathbb E^G(A,B)$ by the equivalence relation given by homotopy. Let $\C_1$ denotes the trivial $G$-Hilbert module $\C^2$ with the standard grading given by $\begin{pmatrix}0 & 1 \\ 1 & 0 \end{pmatrix}$. $KK_1^G(A,B)$ is defined as $KK_0^G(A,B \otimes \C_1)$. 
\end{definition}

Doing computations, we will often use different equivalence relations which turn out to coincide when $A$ is separable and $B$ is $\sigma$-unital. See \cite{blackadar} for details.

\begin{definition} Unitary and operator homotopy equivalences.
\begin{itemize}
\item[$\bullet$]  Unitary equivalence is defined as $(E,\pi,T)\sim_{u} (E',\pi',T')$ if there exists a unitary $u\in\mathcal L_B(E,E')$ such that $T = u^* T' u$ and $\pi(a) = u^* \pi'(a) u , \forall a\in A$.
\item[$\bullet$] Let $\mathbb D^G(A,B) = \{(E,\pi,T) \in\mathbb E^G(A,B) \text{ s.t. } \pi(a)(F^2-1) = 0, [\pi(a),F]=0 \text{ and }V(s^*T)V^* = r^*T,\forall a\in A \}$. It is called the set of degenerate $K$-cycles.   
\item[$\bullet$] An operator homotopy of $K$-cycles is a family $[0,1]\rightarrow \mathbb E^G(A,B) ; s\mapsto (E,\pi,T_s)$, where $s\mapsto T_s$ is norm-continuous. 
\item[$\bullet$] $\sim_{oh}$ is the equivalence relation on $\mathbb E^G(A,B)$ generated by operator homotopy and addition of degenerate elements, i.e. $(E,\pi,T)\sim_{oh} (E',\pi',T')$ if there exists $(E'',\pi'',T'')\in\mathbb E^{G}(A,B)$ such that $(E,\pi,T)\oplus (E'',\pi'',T'')$ and $(E',\pi',T')\oplus (E'',\pi'',T'')$ are operator homotopic, up to unitary equivalence.
\end{itemize}
\end{definition}

The following proposition summarizes propositions $17.2.3$ and $17.2.5$ from \cite{blackadar}. 
 
\begin{prop}[\cite{blackadar}] If $(E,\pi,T)\in\mathbb D^G(A,B)$, then $(E,\pi,T)$ is homotopic to the $0$ $K$-cycle.
If $(E,\pi,T')$ is a compact pertubation of $(E,\pi,T)$ in $\mathbb E^G(A,B)$, i.e. $T'-T\in \mathfrak K_B(E)$, then $(E,\pi,T')$ is operator homotopic to $(E,\pi,T)$.\\
Moreover, if $A$ is separable and $B$ is $\sigma$-unital, then $\sim_{oh}$ coincides with homotopy equivalence of $K$-cycles.
\end{prop}

One of the properties that makes equivariant $KK$-theory so powerful is the existence of a product, called the Kasparov product. Its existence is highly non trivial, and it fails to exists in the non-separable case or in the case of the $KK$-theory for Banach algebras developed by V. Lafforgue \cite{Lafforgue} for example.

\begin{prop}\cite{LeGall} Let $A$, $B$ and $C$ be $G$-algebras such that $A$ is separable. There exists a map 
\[\otimes_B :\left\{\begin{array}{ccc} KK^G(A,B)\times KK^G(B,C) & \rightarrow & KK^G(A,C) \\ (z,z') & \mapsto & z\otimes_B z' \end{array}\right. \]
which is associative and distributive w.r.t. the addition of $K$-cycles. The Kasparov product is covariant w.r.t. $C$ and contravariant w.r.t. $A$.
\end{prop}

\begin{rk}
By the equivariant stabilization lemma \ref{GStabilization}, any $B$-Hilbert module $E$ sits as a complemented $G$-submodule of the standard module $H_B$, and as $[E,\pi,T] = [E \oplus H_B,\pi\oplus 0,T\oplus 0]$, we can suppose $E = H_B$.
\end{rk}

Here are some examples of $K$-cycles. For detailed proofs of the various constructions, we send the reader to \cite{blackadar} and \cite{LeGall}.

\begin{Expl}
If $\phi : A\rightarrow B$ is a $G$-equivariant $*$-homomorphism, it induces a $K$-cycle $(B,\phi,0)\in \mathbb E^G(A,B)$ whose class is denoted by $[\phi]\in KK_0^G(A,B)$. This induces a covariant functor $\phi_* = - \otimes_A [\phi] : KK^G(D,A)\rightarrow KK^G(D,B)$ and a contravariant functor $\phi^*=  [\phi] \otimes_B - : KK^G(B,D)\rightarrow KK^G(A,D)$ for any $G$-algebra $D$. Moreover, if $\phi' : B\rightarrow C$, the following relation holds 
\[ [\phi'\circ \phi] = [\phi]\otimes_B [\phi'].\]
\end{Expl}

%\begin{Expl} Let $0 \rightarrow B\otimes \mathfrak K \rightarrow_\iota E \rightarrow_p A \rightarrow 0 $ be a $G$-equivariant split exact sequence of $G$-algebras. Denote by $s : A \rightarrow E$ the cross section of $p$ and by $\sigma $ the compostion $s\circ p$. Then 
%\[(H_B \oplus H_B^{op},\omega \oplus (\omega \circ \sigma ), \begin{pmatrix} 0 & 1 \\ 1 & 0\end{pmatrix} )\] 
%defines a $K$-cycle, hence an element of $KK_0^G(A,B)$ called the splitting morphism of the extension. % Definir w et op
%\end{Expl}

This example allows one to think of $KK(A,B)$ as generalized morphisms between $A$ and $B$ : every $*$-homomorphism induces a $K$-cycle such that composition is preserved. Actually, it turns out that generalized morphisms are not so far from coming from genuine $*$-homomorphisms. Indeed, H. Oyono-Oyono has shown in the appendice of \cite{LaffOY} that every element of $KK^G(A,B)$ can be written as the Kasparov product of at most $d$ elements, each one coming either from a $*$-homormorphism or from a $KK$-inverse of a $*$-homomorphism.\\

%%%%%%%%%%%%%%%%%%
%%  PROPERTY D  %%
%%%%%%%%%%%%%%%%%%

More precisely, let us define decomposition property $(d)$.

\begin{definition}
Let $d$ be a positive integer. An element $z\in KK^G(A,B)$ is said to satisfy decomposition property $(d)$ if
\begin{itemize}
\item[$\bullet$] there exist $G$-algebras $A_0$, $A_1$, ..., $A_d$ such that $A_0=A$ and $A_d=B$, 
\item[$\bullet$] there exist elements $z_j \in KK^G(A_{j},A_{j+1})$ for $j\in\{0,..,d-1\}$ such that, either $z_j$ is induced by a $G$-morphism $A_j \rightarrow A_{j+1}$, either there exists a $G$-morphism $\phi_j : A_{j+1}\rightarrow A_j$ such that $z_j \otimes_{A_{j+1}} [\phi_j] = 1_{A_j}$ and $ [\phi_j] \otimes_{A_{j}} z_j  = 1_{A_{j+1}}$,
\end{itemize}
such that $z = z_1 \otimes_{A_1}  ... \otimes_{A_{d-1}} z_{d-1} $ holds.
\end{definition}

Then, the following theorem is true for a universal constant $d$, which does not depend on the groupoid. It will be crucial to prove that the controlled Kasparov and Roe transforms, applications to be defined later, respect the Kasparov product. 

\begin{thm}[\cite{LaffOY}]\label{propertyD}
Let $G$ be a locally compact groupoid with Haar system. Then every element $z\in KK^G(A,B)$ has decomposition property $(d)$.
\end{thm}

We saw that $KK^G(A,B)$ is a bifunctor w.r.t. $*$-homomorphisms, contravariant in the $A$ variable and covariant in the $B$ variable. Let us describe how $KK^G$ transforms under morphisms of groupoids. See $\cite{LeGall}$ for a proof.

\begin{prop} Let $G$ and $G'$ be étale groupoids and $\phi :G\rightarrow G'$ a strict morphism of topological groupoids, i.e. $\phi$ is continuous such that $\phi(e_x)=e_{\phi^{(0)}(x)}$ and $\phi(g)\phi(g') = \phi(gg')$ for all $(g,g')\in G^{(2)}$. Let $A$ and $B$ be $G'$-algebras, and $\phi^* A = A\otimes_\phi C_0(G)$ and $\phi^* B = B\otimes_\phi C_0(G)$ the pull back $G$-algebras. Then $\phi$ induces a homomorphism of $\Z_2$-graded abelian groups
\[\phi^* : KK^{G'}(A,B)\rightarrow KK^G(\phi^* A,\phi^* B),\]
such that, if $\phi' : G'\rightarrow G''$ is another strict morphism, then $(\phi'\circ\phi)^* =\phi^*\circ(\phi')^*$. In other words, $KK^G$ is contravariant in the $G$ variable.
\end{prop}

The next two propositions reminds the reader about crucial natural morphisms built by P.Y. Le Gall in his thesis that we will need later on. We only state results and remind the reader about the constructions, without proofs. The reader can consult \cite{LeGall} for details.

\begin{prop}\cite{LeGall} Let $A$, $B$, and $D$ be $G$-algebras. Then 
\[\tau_D : 
\left\{\begin{array}{rcl} 
KK^G(A,B) & \rightarrow & KK^G(A\otimes D,B\otimes D) \\ 
\ [E,\pi,T] & \mapsto     & [E\otimes_{C_0(G^{(0)})} D,\pi\otimes_{C_0(G^{(0)})} id_D,T\otimes_{C_0(G^{(0)})} id_D]
\end{array}\right. \] 
defines a homomorphism of $\Z_2$-graded abelian groups which respects the Kasparov product, i.e. 
\[\tau_D(x\otimes_B y) = \tau_D(x)\otimes_{B\otimes D} \tau_D(y)\quad \forall x\in KK^G(A,B),y\in KK^G(B,C).\]
\end{prop}

The next transformation is called the descent functor, or the Kasparov transform.

\begin{prop}\cite{LeGall} Let $A$, $B$, $C$ and $D$ be $G$-algebras. Then 
\[j_G : 
\left\{\begin{array}{rcl} 
KK^G(A,B) & \rightarrow & KK^G(A\rtimes_r G,B\rtimes_r G) \\ 
\ [E,\pi,T] & \mapsto     & [E_G,\pi_G,T_G]
\end{array}\right. \] 
defines a homomorphism of $\Z_2$-graded abelian groups which respects the Kasparov product, i.e. 
\[j_G(x\otimes_B y) = j_G(x)\otimes_{B\rtimes_r G} j_G(y)\quad \forall x\in KK^G(A,B),y\in KK^G(B,C).\]
\end{prop}

The remainder of the section is devoted to compile some useful facts that we will use.\\

We will use the following result.\cite{blackadar}\cite{CuSk}

%\begin{prop}
%Let $z\in KK^G_1(A,B)$. The induced homomorphism $-\otimes_A z : K_*(A)\rightarrow K_*(B)$ can be realized, up to Morita equivalence, as the boundary of the following semi-split $G$-equivariant extension of $G$-algebras
%\[\begin{tikzcd}[column sep = small] 
%0 \arrow{r}& \mathfrak K \otimes B \arrow{r} & E^{\pi,T} \arrow{r} & A \arrow{r} & 0\end{tikzcd}\]
%where $E^{\pi,T}=\{(a,P\pi(a)P +y) : a\in A , y\in \mathfrak K \otimes B\}$, the arrows are the obvious inclusion and projection, and the completely positive section is $a\mapsto (a, P \pi(a) P)$. Here, we implicitely choose a $K$-cycle $(H_B,\pi,T)$ representing $z$, and $P=\frac{1+T}{2}$. The fact that this choice does not affect the boundary will be proven in the upcoming sections. 
%\end{prop}

\begin{prop}
Let $z\in KK^G_1(A,B)$ and choose any $K$-cycle $(H_B,\pi,T)$ representing $z$. Let $P=\frac{1+T}{2}$. The induced homomorphism 
\[-\otimes_A z : K_*(A)\rightarrow K_*(B)\]
can be realized, up to Morita equivalence, as the boundary of the following semi-split $G$-equivariant extension of $G$-algebras
\[\begin{tikzcd}[column sep = small] 
0 \arrow{r}& \mathfrak K \otimes B \arrow{r} & E^{(\pi,T)} \arrow{r} & A \arrow{r} & 0\end{tikzcd}\]
where $E^{\pi,T}=\{(a,P\pi(a)P +y) : a\in A , y\in \mathfrak K \otimes B\}$, the arrows are the obvious inclusion and projection, and the completely positive section is $a\mapsto (a, P \pi(a) P)$. The fact that the choice of the $K$-cycle does not affect the boundary will be proven in the upcoming sections. 
\end{prop}

The following result will be constantly used in the upcoming sections. In short, it explains how to construct the boundary map associated to any semi-split extension $0\rightarrow J\rightarrow A \rightarrow A/J \rightarrow 0$ as the Kasparov product of an element $[\partial_{J,A}]\in KK^G_1(A/J,J)$. For references, see \cite{blackadar}.\\

Recall that, for any $G$-equivariant $*$-homomorphism $\phi : A \rightarrow B$, we can define its cone denoted $C_\phi$ by 
\[C_\phi = \{(a,f)\in A\times CB \text{ s.t. } \phi(a)=f(0)\}.\]
If any $G$-algebra $A$ is given, $0\rightarrow SA\rightarrow CA\rightarrow A \rightarrow 0$ is a $G$-equivariant semi-split extension, and defines an element $[\partial_A]=\tau_A([\partial_\C])\in KK^G_1(A,SA)$ which is invertible. Now, give yourself a semi-split extension 
\[\begin{tikzcd}[column sep = small]0 \arrow{r} & J \arrow{r}{\iota} & A \arrow{r}{q} & A/J \arrow{r}& 0 \end{tikzcd}\] 
and define $\alpha : J\rightarrow C_q ; x\mapsto (x,0)$ and the canonical inclusion $\beta : S (A/J)\hookrightarrow C_q$. It turns out that $[\alpha]\in KK_0^G(J,C_q)$ is invertible.

\begin{prop}
The boundary map $\partial_{J,A} : K_*(A/J)\rightarrow K_{*+1}(J)$ is given by the Kasparov product by an element $[\partial_{J,A}]\in KK^G_1(J,A/J)$ which satisfies 
\[[\partial_{J,A}] = [\partial_{A/J}]\otimes_{} \beta^*([\alpha]^{-1}).\]
\end{prop}

The next lemma will be used during the proof of the functorial properties of the controlled Roe and Kasparov tranformations that will be defined later. These transformations are defined on $K$-cycle which are put in standard form, i.e. $[H_B,\pi,T]$. Changing the coefficients leads to $K$-cycles which are not of this form, hence the lemma. It states that we can always describe explicitely the standard form of a $K$-cycle pushed forward.

\begin{lem}\label{isometryKK}
Let $\phi : B\rightarrow B'$ be a $G$-equivariant homomorphism, and $z=[H_B,\pi, T]\in KK^G(A,B)$. Let $V\in\mathcal L_{B'}(H_B\otimes B', H_{B'})$ be the isometry of the remark \ref{isometry} and $p = VV^*\in\mathcal L_{B'}(H_{B'})$. Define $\pi' : A\rightarrow \mathcal L_{B'}(H_{B'})$ as $\pi'(a) = V\pi(a)V^*$ and $T'= V(T\otimes_\phi 1)V^* + 1-p \in \mathcal L_{B'}(H_B')$. Then $(H_{B'},\pi',T')$ is a $K$-cycle and 
\[g^*(z) = [H_B\otimes B',\pi\otimes_\phi 1,\phi_*(T)]=[H_B', \pi', T']\text{ in } KK^G(A,B').\]
\end{lem} 

\begin{dem}
As a simple computation shows : 
\[\begin{array}{ll} [\pi'(a),T'] = V[\pi(a),T]V^*, &  T'^*-T' = V(T^*\otimes_\phi 1-T\otimes_\phi 1)V^* \\
 T'^2-T' = V(T^2\otimes_\phi 1-T\otimes_\phi 1)V^* & \text{and } r^* T' - U s^*T' U^* = V((r^*(T) - U s^*(T) U^*)\otimes_\phi 1 ) V^*
\end{array} \]
(where $U$ is the action of $G$ on $E$). Hence $[H_{B'},\pi',T']$ satisfies the relations of $K$-cycle.\\

Remark \ref{isometry} shows that $ (H_B\otimes_\phi B' )\oplus (1-p) H_{B'} \cong H_{B'}$.\\

Put $E= H_{B'} \oplus (H_B\otimes_\phi B')$ and $R_s =\begin{pmatrix} \cos (s) id_{H_{B'}} & -\sin (s) V \\  \sin (s)V^* & \cos (s) V^*V \end{pmatrix}$ , and define
\[\begin{array}{c} 
T_s = R_s\begin{pmatrix} V(T\otimes_\phi 1)V^* +1-VV^* & 0 \\ 0 & -T\otimes_\phi 1 \end{pmatrix}R_s^*,\\
\pi_s(a)= \begin{pmatrix} V(\pi(a)\otimes_\phi 1) V^* & 0 \\ 0 & \pi(a)\otimes_\phi 1\end{pmatrix}
\end{array}.\]
Then $ s\mapsto [E, \pi_s,T_s ] $ is an homotopy from $[H_{B'}, \pi', T']-[H_B\otimes B',\pi\otimes_\phi 1,\phi_*(T)]$ to the cycle given by 
\[\begin{pmatrix} V(T\otimes_\phi 1)V^*  & 0 \\ 0 & -T\otimes_\phi 1 \end{pmatrix}\]
which is $0\in KK^G(A,B)$. \\
\qed\end{dem}






































