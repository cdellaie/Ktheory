\section{$K$-theory controlled by a coarse structure}

In this section, we define controlled $K$-theory in more generality than the functor defined in \cite{OY2} and in the previous section. The goal is to develop controlled $K$-theory to a broader setting that what is used until now. Notably, we give a definition that allows to state that the controlled $K$-theory is a genuine functor between appropriately chosen categories. The price to pay is a little more generality, and functorial definitions, but the reward is a larger range of applications of the theory. We will show how it is possible to apply controlled-lingo to compact quantum groups in the sense of Woronowicz, foliations groupoids and twisted representations of locally compact groups.\\

\begin{definition}
A coarse structure $\mathcal E$ is a lattice which is an abelian semi-group. %such that $\forall E,E'\in \mathcal E$, $E\leq E'E$. 
Recall that a lattice is a poset for which every pair $(E,E')$ admits a supremum $E\vee E'$ and an infimum $E\wedge E'$.
\end{definition}

\begin{definition}
A $C^*$-algebra $A$ is said to be $\mathcal E$-filtered if there exists a coarse structure $\mathcal E$ and, for every $E\in \mathcal E$, linear subspaces $A_E$ of $A$ such that :\\
\begin{itemize}
\item[$\bullet$] if $E \leq E'$, then $A_E\subseteq A_{E'}$, and the inclusion $\phi_E^{E'}: A_E\hookrightarrow A_{E'}$ induces an inductive system of linear spaces,
\item[$\bullet$] $A_E$ is stable by involution,
\item[$\bullet$] for all $E,E'\in\mathcal E$, $A_E.A_{E'}\subseteq A_{EE'}$,
\item[$\bullet$] the union of subspaces is dense in $A$, i.e. $\overline{\cup_{E\in\mathcal E}A_E} = \varinjlim A_E = A$.
\item[$\bullet$] if $A$ is unital, we impose that $1\in A_E,\forall E\in\mathcal E$.
\end{itemize}
\end{definition}

If $A$ is a non-unital filtered $C^*$-algebra, we will by default endowed its unitalization $\tilde A$ with the filtration $\tilde A_E = A_E + \C$. A $*$-homomorphism $\phi : A \rightarrow B$ is said to be filtered if $\phi(A_E)\subseteq B_E$ for all $E\in\mathcal E$.\\

If $(A,\mathcal E)$ and $(B,\mathcal E')$ are two filtered $C^*$-algebras, a filtered morphism $(\phi,\rho): (A,\mathcal E)\rightarrow (B,\mathcal E')$ is :
\begin{itemize}
\item[$\bullet$] a non-decreasing map $\rho : \mathcal E\rightarrow \mathcal E'$,
\item[$\bullet$] a $*$-homomorphism $\phi: A\rightarrow B$ such that $\phi (A_E)\subseteq B_{\rho(E)}$ for all $E\in\mathcal E$.
\end{itemize}

The crucial example for us will be crossed products of $G$-algebras by an étale groupoid $G$. Note that this definition generalizes that of \cite{OY2}. Indeed, as will be recalled later, the Roe algebras can be expressed as a crossed product by a so-called coarse groupoid, which is étale \cite{SkTuYu}, and the definition given here, applied to this groupoid, gives back the filtration in the sense of \cite{OY2}. The second example will be that of crossed products by compact quantum groups of Woronowicz.\cite{Wo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Almost unitaries and almost projections}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{definition}
Let $(A,\mathcal E)$ be a unital filtered $C^*$-algebra. Let $\varepsilon\in(0,\frac{1}{4})$ and $E\in \mathcal E$ a controlled subset. The set of $\varepsilon$-$E$-unitaries is the set 
\[U^{\varepsilon, E}(A)= \{u\in A_E \text{ s.t. } ||u^*u-1||<\varepsilon\text{ and }||uu^*-1||<\varepsilon \}\]
and the set $\varepsilon$-$E$-projections is the set 
\[P^{\varepsilon, E}(A)= \{p\in A_E \text{ s.t. } p=p^*\text{ and }||p^2-p||<\varepsilon \}.\]
We will use the notation $P_n^{\varepsilon, E}(A)$ for $P^{\varepsilon, E}(M_n(A))$, and $U_n^{\varepsilon, E}(A)$ for $U^{\varepsilon, E}(M_n(A))$. Also, $P_\infty^{\varepsilon, E}(A)$ is the algebraic inductive limit of the $P_n^{\varepsilon, E}(A)$ under the natural inclusions
\[\left\{\begin{array}{rcl}
	P^{\varepsilon,E}_n(A) 		& \rightarrow	& P^{\varepsilon,E}_{n+1}(A)\\ 
	p 		& \mapsto 	& \begin{pmatrix}p& 0 \\ 0&0 \end{pmatrix}
\end{array}\right.\]
and $U_\infty^{\varepsilon, E}(A)$ is the algebraic inductive limit of the $U_n^{\varepsilon, E}(A)$ under the natural inclusions
\[\left\{\begin{array}{rcl}
	U^{\varepsilon,E}_n(A) 		& \rightarrow	& U^{\varepsilon,E}_{n+1}(A)\\ 
	u 		& \mapsto 	& \begin{pmatrix}u & 0 \\ 0& 1 \end{pmatrix}
\end{array}\right. .\]
\end{definition}

\begin{rk}Let $\varepsilon\in (0,\frac{1}{4})$ and $E\in\mathcal E$.\\
\begin{itemize}
\item[$\bullet$] If $p\in P^{\varepsilon,E}(A)$, then $p$ has a spectral gap around $\frac{1}{2}$, and functional calculus allows to define a genuine projection $\kappa_0(p)$, as in \cite{OY2}, by taking $\kappa_0$ to be a continuous function that vanishes inside the spectral gap and that is respectively $0$ and $1$ on the left and right part of the spectrum of $p$. As this projection does not depend on $\kappa_0$, we will always denote it the same, even if the function depends on $p$.\\
\item[$\bullet$] If $u\in U^{\varepsilon,E}(A)$, then $u^* u$ is invertible, and $u(u^* u)^{-1}$ defines a unitary, that we will denote $\kappa_1(u)$.
\end{itemize}
\end{rk}

In order to define controlled $K$-groups, define the following equivalence relations on $P^{\varepsilon, E}_\infty(A)\times \N$ and $U^{\varepsilon,E}_n(A)$.\\

\begin{itemize}

\item[$\bullet$] $(p,l) \sim (q,l')$ if there exists a homotopy of almost projections $h\in P^{\varepsilon, E}_\infty(A[0,1])$ and an integer $k$ such that 
\[h(0)=\begin{pmatrix} p & 0 \\ 0 & 1_{k+l'} \end{pmatrix} \text{ and }
h(1)=\begin{pmatrix} q & 0 \\ 0 & 1_{k+l} \end{pmatrix}\]
\item[$\bullet$] $u \sim v$ if there exists a homotopy of almost unitaries $h\in U^{3\varepsilon, E\circ E}_\infty(A[0,1])$ and an integer $k$ such that $h(0)= u \text{ and }h(1)=v$.\\
\end{itemize}

The following fact will be useful for future purposes. The reader can look at Proposition $1.30$ of \cite{OY3} for references. Recall the following definition.

\begin{definition}
Let $C>0$ and $A$ be a $C^*$-algebra. A map $h : [0,1]\rightarrow A $ is called $C$-Lipschitz if $||h(s)-h(t)||\leq C|s-t|$ for all $s,t\in [0,1]$.
\end{definition}

\begin{prop}\label{Lip}
There exists a universal constant $L>0$ such that, for any unital filtered $C^*$-algebra $(A,\mathcal E)$, any $\varepsilon\in(0,\frac{1}{4})$ and  any $E\in \mathcal E$, if $u_0$ and $u_1$ are homotopic in $U_n^{\varepsilon, E}(A)$, then there exists a interger $k$ and a $L$-lipschitz homotopy in $U_{n+k}^{3\varepsilon,E\circ E}$ connecting $\begin{pmatrix} u_0 & 0 \\ 0 & 1_k\end{pmatrix}$ and $\begin{pmatrix} u_1 & 0 \\ 0 & 1_k\end{pmatrix}$. 
\end{prop}

Denote $[(p,l)]_{\varepsilon,E}$ and $[u]_{\varepsilon,E}$ for the equivalence classes of almost-projections and almost-unitaries. Then, the same proof as \cite{OY2} shows that $[p,l]_{\varepsilon,E}+[q,l']_{\varepsilon,E}=[diag(p,q),l+l']_{\varepsilon,E}$ and $[u]_{\varepsilon,E}+[v]_{\varepsilon,E}=[diag(u,v)]_{\varepsilon,E}$ induces a group law on the equivalence classes, that we denote $K_0^{\varepsilon,E}(A) = P^{\varepsilon, E}_\infty(A)\times \N / \sim$ and $K_1^{\varepsilon,E}(A) = U^{\varepsilon, E}_\infty(A) / \sim$.\\

If $A$ is not unital, $K_0^{\varepsilon,E}(A)$ is defined as
\[\{[p,l]_{\varepsilon,E} : p\in P^{\varepsilon,E}_\infty (\tilde A), l\in \N \text{ s.t. rank}(\kappa_0(\rho_A(p)))=l \}\]
and $K_1^{\varepsilon,E}(A)$ is defined as $U_\infty^{\varepsilon,E}(\tilde A)/ \sim_{\varepsilon,E}$.\\

\begin{definition}
The controlled $K$-theory of a filtered $C^*$-algebra $(A,\mathcal E)$ is the family of abelian groups $\hat K_0(A) = (K_0^{\varepsilon,E}(A))_{\varepsilon\in (0,\frac{1}{4}),E\in\mathcal E}$ and $\hat K_1(A) = (K_1^{\varepsilon,E}(A))_{\varepsilon\in (0,\frac{1}{4}),E\in\mathcal E}$ defined above.\\
\end{definition}

We define canonical morphisms : if $\varepsilon, \varepsilon'\in (0,\frac{1}{4})$ and $E,E'\in\mathcal E$ such that $\varepsilon \leq \varepsilon'$ and $E \subseteq E'$, the natural homomorphism $K_*^{\varepsilon,E}(A)\hookrightarrow K_*^{\varepsilon',E'}(A)$ is denoted by $\iota_{\varepsilon,E}^{\varepsilon',E'}$. Notice that $\iota_{\varepsilon',E'}^{\varepsilon'',E''}\circ\iota_{\varepsilon,E}^{\varepsilon',E'}=\iota_{\varepsilon,E}^{\varepsilon'',E''}$ when this expression makes sense.\\

One has also forgetful morphisms $\iota_{\varepsilon,E} : K_*^{\varepsilon,E}\rightarrow K_*(A)$ given by $[p,l]_{\varepsilon,E} \mapsto [\kappa_0(p)]-[1_l]$ and $[u]_{\varepsilon,E} \mapsto [\kappa_1(u)] $, and 
$\iota_{\varepsilon',E'}\circ\iota_{\varepsilon,E}^{\varepsilon',E'}=\iota_{\varepsilon, E}$ holds. The controlled $K$-theory groups approximate the usual $K$-groups in the sense that $\varinjlim_{E} K_*^{\varepsilon,E}(A) = K_*(A)$ for any $\varepsilon\in (0,\frac{1}{4})$.\\

%\begin{Expl} Some examples that we will use :\\
%\begin{itemize}
%\item[$\bullet$] Let $(X,\mathcal E)$ be a coarse space. The set of controlled subsets $\mathcal E$ is our proeminent example.
%\item[$\bullet$] Let $G$ be an étale groupoid. Then the set of open relatively compact subsets $\mathcal E$ of $G$ is a coarse structure. If $G$ is $\sigma$-compact, and $A$ is a $G$-algebra, $A\rtimes_r G$ is naturally filtered by $\mathcal E$ : if $E\subseteq G$ is open relatively compact, define $(A\rtimes_r G)_E = \{f\in C_c(G,A) : \text{ supp}(f)\subseteq E\cup E^{-1}\}$.
%\item[$\bullet$] Let $\mathbb G$ be a compact quantum group in the sense of Woronowicz. Then the set of finite dimensional representations of $\mathbb G$ is a coarse structure w.r.t. $\pi\circ \pi'=\pi\otimes \pi'$ as composition, and $\pi\leq\pi'$ if $\pi$ is equivalent to a subrepresentation of $\mathbb G$.
%\item[$\bullet$] Gomez-Aparicio : Let $G$ be a locally compact group, and $S$ be the set of representations of $G$ of the form $\lambda\otimes\pi$ for $\pi$ a finite dimensional representation of $G$.\end{itemize}   
%\end{Expl}

We list some examples that we will use, and some others that shall hopefully be developed in future work.

\begin{Expl}
Let $(X,\mathcal E)$ be a coarse space. The set of symmetric controlled subsets $\mathcal E_X$ is our proeminent example. Recall that it is the set of subsets $E\subseteq X\times X$ such that $\sup \{ d(x,y) : (x,y)\in E\}$ is finite and $E=E^{-1}$. Let $E,E'$ be such sets, their composition is given by :
\[E\circ E' = EE' \cup E'E \text{ where }EE' = \{(x,y) \text{ s.t. }\exists z\in X / (x,z)\in E \text{ and }(z,y)\in E'\}.\]
\end{Expl}

\begin{Expl}
Let $G$ be a $\sigma$-compact étale groupoid. Then the set of symmetric compact subsets $\mathcal E_G$ of $G$ is a coarse structure. It is the set of compact subsets $E\subseteq G$ such that $E=E^{-1}$, where $E^{-1} = \{g^{-1} : g\in E\}$. For $E$ and $E'$ in $\mathcal E_G$, their composition is given by :
\[E\circ E' = EE' \cup E'E \text{ where }EE' = \{gg' : (g,g')\in G^{(2)}\}.\] 
If $G$ is $\sigma$-compact, and $A$ is a $G$-algebra, $A\rtimes_r G$ is naturally filtered by $\mathcal E_G$ : if $E\subseteq G$ is a compact subset, define $(A\rtimes_r G)_E = \{f\in C_c(G,A) : \text{ supp}(f)\subseteq E\}$. This situation has important particular cases :
\begin{itemize}
\item[$\bullet$] Let $G$ be the coarse groupoid of a coarse space $(X,\mathcal E)$, which is étale. Then $\mathcal E_G$ is given by \[\{\overline{E} : E\in\mathcal E_X\} \cong \mathcal E_X.\] 
\item[$\bullet$] Let $\Gamma$ be a finitely generated group acting by homeomorphism on a topological space $X$. Recall that the word length $l$ defines a proper metric on $\Gamma$. Define, for $R>0$ and $K\subseteq X$, 
\[\Delta_{R,K} = \{(x,g)\in G \text{ s.t. } l(g)\leq R \text{ and } x\in K\}\] 
and $\mathcal E_G $ as the set of $E\subseteq G$ such that $\exists R>0, E\subseteq \Delta_R$ and $E = E^{-1}$. It provides the étale action groupoid $G=X\rtimes \Gamma$ with a coarse structure.
\end{itemize}
\end{Expl}

\begin{Expl}
Let $\mathbb G$ be a compact quantum group in the sense of Woronowicz. Then the set $\mathcal E_{\mathbb G}$ of finite dimensional representations of $\mathbb G$ is a coarse structure w.r.t. the composition $\pi\circ \pi'=\pi\otimes \pi'$, and $\pi\leq\pi'$ if $\pi$ is equivalent to a subrepresentation of $\pi'$.
\end{Expl}

% MARIA PAOLA GOMEZ APARICIO
%\begin{Expl}
%Let $G$ be a locally compact group, and $S$ be the set of representations of $G$ of the form $\lambda\otimes\pi$ for $\pi$ a finite dimensional representation of $G$ and $\lambda$ si the left regular representation of $G$. For $\pi,\pi'\in S$, put
%\[\pi\circ \pi'\]
%In \cite{Maria}
%\end{Expl}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Quantitative objects}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In order to study functorial properties of controlled $K$-theory, we will adapt and study the notion of quantitative object defined in \cite{OY2}.\\

\begin{definition}
A quantitative object is a family of abelian groups $\hat{\mathcal{O}}=\{\mathcal{O}_{\varepsilon, E}\}_{\varepsilon\in (0,\frac{1}{4}, E\in\mathcal{E}}$ endowed with a family of group homorphisms $\phi_{\varepsilon, E}^{\varepsilon', E'} : \mathcal{O}_E\rightarrow \mathcal{O}_{E'}$ for any $E,E'\in\mathcal E$ and $0<\varepsilon\leq \varepsilon'<\frac{1}{4}$ such that $E\subseteq E'$, satisfying $\phi_{\varepsilon, E}^{\varepsilon, E}= id_{\mathcal{O}_E}$ and $\phi_{\varepsilon', E'}^{\varepsilon'', E''}\circ \phi_{\varepsilon, E}^{\varepsilon', E'} =\phi_{\varepsilon'', E''}^{\varepsilon, E}$ whenever $E\subseteq E' \subseteq E''$ and $\varepsilon<\varepsilon'<\varepsilon''$.
\end{definition}

We need to define controlled morphisms between quantitative objects. We first define control pairs, which are essentially what ensures that the controlled morphisms do not distort too much the propagation.\\

\begin{definition}
A control pair is a couple $\rho=(a,h)$ where $a\in (0,\frac{1}{4})$ and $h : (0,\frac{1}{4a})\rightarrow \N^*$ is a non-decreasing function. 
\end{definition}

Control pairs can be naturally composed, and if $(a,h)$ and $(b,k)$ are two control pairs, then their composition, denoted by $(b,k)\ast(a,h)$, is defined by $(ab,k\ast h)$, where $k\ast h : (0,\frac{1}{4ab})\rightarrow \N^* ; \varepsilon \mapsto k_{a \varepsilon}h_\varepsilon$. \\

Control pairs naturally act on the index subset of the controlled $K$-groups. Indeed, if $\varepsilon\in (0,\frac{1}{4a})$ and $E\in\mathcal E$, $(a,h).(\varepsilon,E)= (a\varepsilon,E^{h_\varepsilon})$ is in $(0,\frac{1}{4})\times\mathcal E$. This allows to define controlled morphims.\\

We can also compare control pairs. Indeed, define the following partial order : $(a,h) \leq (b,k)$ if $a \leq b$ and $h_\varepsilon\leq k_\varepsilon$ for all $\varepsilon\in (0,\frac{1}{4a})$.\\ 

\begin{definition}
Let $\hat{\mathcal O}$ and $\hat{\mathcal O'}$ be two quantitative objects and $\rho=(a,h)$ a control pair. A $\rho$-controlled morphism is a family of groups homomorphims $F_{\varepsilon, E} : \mathcal O_{\varepsilon, E} \rightarrow \mathcal{ O'}_{a\varepsilon, E^{h_\varepsilon}}$ for any $\varepsilon\in(0,\frac{1}{4a})$ and $E\in\mathcal E$, such that
\[\phi^{a\varepsilon',E'^{h_\varepsilon'}}_{a\varepsilon,E^{h_\varepsilon}} \circ F_{\varepsilon, E} =F_{\varepsilon',E'} \circ \phi_{\varepsilon,E}^{\varepsilon',E'}\] for any $0<\varepsilon<\varepsilon'<\frac{1}{4a}$ and $E\subseteq E'$.
\end{definition}

\begin{rk}
%If we don't specify any control pair, it is implicit and evident from the context, or it is not crucial to specify it. 
When not specified, the control pair is evident from the context. For example, we will often refer to a controlled morphism, meaning a $\alpha$-controlled morphism for some control pair $\alpha$. For a controlled morphism $\hat F : \hat K(A)\rightarrow \hat K(B)$, we will denote $F:K(A)\rightarrow K(B)$ the unique homomorphism it induces in $K$-theory. We will always try to indicate an analogy with the classical case (as opposed to the controlled or quantitative case) by putting a hat on top of controlled objects that are hopefully inducing a well known object. For example, controlled $K$-theory is $\hat K$, the controlled assembly map will be denoted $\hat \mu_{G,A}$, etc.\\
\end{rk}

Let $\rho=(\lambda,h),\alpha,\beta$ be control pairs, and $F :  \hat{\mathcal O} \rightarrow \hat{\mathcal O'}$ and $G : \hat{\mathcal O} \rightarrow \hat{\mathcal O'}$ be $\alpha$- and $\beta$-controlled morphisms respectively. We write $F\sim_\rho G$ if :
\begin{itemize}%{$bullets$}
\item[$\bullet$] $\alpha \leq \rho$ and $\beta \leq \rho$,
\item[$\bullet$] for any $\varepsilon\in (0,\frac{1}{4\lambda})$ and $E\in \mathcal E$, the following diagram commutes : 
\[\begin{tikzcd}
 \mathcal O_{\varepsilon,E} \arrow{r}{F_{\varepsilon,E}} \arrow{d}{G_{\varepsilon,E}} & \mathcal O'_{\alpha (\varepsilon,E) } 
\arrow{d}{\iota_{\beta(\varepsilon,E)}^{\rho(\varepsilon,E)}} \\
 \mathcal O'_{\beta (\varepsilon,E) } \arrow{r}{\iota_{\alpha(\varepsilon,E)}^{\rho(\varepsilon,E)}} & \mathcal O'_{\rho(\varepsilon,E)}\\
\end{tikzcd}.\]
\end{itemize}

\begin{definition}
Let $\alpha$ and $\rho$ be control pairs satisfying $\alpha \leq \rho$ and $F : \hat{\mathcal O} \rightarrow \hat{\mathcal O'}$ a $\alpha$-controlled morphism. We say that $F$ is $\rho$-invertible if there exist a controlled morphism $ G : \hat{\mathcal O'} \rightarrow \hat{\mathcal O}$ such that $G \circ F \sim_\rho Id_{\hat{\mathcal O}}$ and $F\circ G \sim_\rho Id_{\hat{\mathcal O'}}$. $G$ is said to be a $\rho$-inverse for $F$.
\end{definition}

As we will see for controlled assembly maps, the correct notions of injectivity and surjectivity for controlled morphisms need to be adpated in the following way.\\

\begin{definition}
Let $\rho=(\lambda,h)$ and $\alpha$ be controlled pairs, and $F : \hat{\mathcal O} \rightarrow \hat{\mathcal O'}$ a $\alpha$-controlled morphism. 
\begin{itemize}
\item[$\bullet$] $F$ is $\rho$-injective if, given any $\varepsilon \in (0,\frac{1}{4\lambda})$ and $E\in \mathcal E$, $\alpha\leq \rho$ and, for all $x\in \mathcal O_{\varepsilon, E}$ such that $F_{\varepsilon, E}(x)=0$, then $\iota_{\varepsilon, E}^{\lambda\varepsilon, h_\varepsilon E}(x)=0$,
\item[$\bullet$] $F$ is $\rho$-surjective if, given any $\varepsilon \in (0,\frac{1}{4\lambda})$ and $E\in \mathcal E$, for any $y\in \mathcal O' _{\varepsilon, E}$, there exists $x\in \mathcal O_{\rho(\varepsilon,E)}$ such that $F_{\rho(\varepsilon,E)}(x)= \iota_{\varepsilon,E}^{\rho(\varepsilon,E)}$,
\item[$\bullet$] $F$ is a $\rho$-isomorphism if $F$ is both $\rho$-injective and $\rho$-surjective.
\end{itemize}
\end{definition}

\subsection{Controlled exact sequences}

\begin{definition}
Let $F : \hat{\mathcal O}\rightarrow \hat{\mathcal O'}$ and $G : \hat{\mathcal O'}\rightarrow \hat{\mathcal O''}$ be $(\alpha,h)$-controlled and a $(\beta,k)$-controlled morphisms respectively. The sequence
\[\begin{tikzcd}[column sep = small] \hat{\mathcal O} \arrow{r}{F} & \hat{\mathcal O'} \arrow{r}{G} & \hat{\mathcal O''} \end{tikzcd}\]
is called $\rho$-exact at $\hat{\mathcal O'}$ if $G\circ F=0$ and if for all $\varepsilon\in (0,\frac{1}{4 \max (\lambda \alpha,\beta)})$, $E\in\mathcal E$ and any $y\in \mathcal O'_{\varepsilon,E}$ such that $G_{\varepsilon,E}(y) = 0$, then there exists $x\in \mathcal O_{\rho(\varepsilon,E)}$ such that $F_{\rho(\varepsilon,E)}(x)=\iota_{\varepsilon,E}^{\rho(\varepsilon,E)} (y)$.\\
A sequence of controlled morphisms 
\[\begin{tikzcd}[column sep = small] ... \arrow{r}{F_{k-2}} & \hat{\mathcal O_{k-2}} \arrow{r}{F_{k-1}} & \hat{\mathcal O_{k-1}} \arrow{r}{F_k} & \hat{\mathcal O_k} \arrow{r}{F_{k+1}} & ... \end{tikzcd}\] 
is said to be $\rho$-exact if the sequence
\[\begin{tikzcd}[column sep = small] \hat{\mathcal O_{j-1}} \arrow{r}{F_{j}} & \hat{\mathcal O_{j}} \arrow{r}{F_{j+1}} & \hat{\mathcal O_{j+1}} \end{tikzcd}\]
is $\rho$-exact at $\hat{\mathcal O_j}$ for all $j$.
\end{definition}

\subsection{Morita equivalence}
A controlled version of the Morita equivalence exists. Indeed, the classical Morita equivalence states that, if $e$ is a rank $1$ projection in $\mathcal L (H)$, the map $A\rightarrow A\otimes \mathfrak K(H) ; a\mapsto a\otimes e$ induces an isomorphism in $K$-theory. But this map preserves propagation, hence the same proof as in \cite{OY2} gives the following proposition.

\begin{prop}
Let $A$ be a filtered $C^*$-algebra and $H$ a separable Hilbert space. Then the $*$-morphism
\[A\rightarrow A\otimes \mathfrak K(H) ; \quad a\mapsto 
\begin{pmatrix}a & & \\  & 0 & \\ & & ... \end{pmatrix}\]
induces a group isomorphism 
\[\mathcal M_A^{\varepsilon,E} : K^{\varepsilon,E}(A)\rightarrow K^{\varepsilon,E}(A\otimes \mathfrak K(H)) \]
for every $\varepsilon\in(0,\frac{1}{4})$ and $E\in\mathcal E$. The family $\mathcal M_A = (\mathcal M_A^{\varepsilon,E} )_{\varepsilon\in(0,\frac{1}{4}),E\in\mathcal E}$ is called the controlled Morita equivalence and is a controlled morphism. It induces the usual Morita equivalence $M_A: K(A)\rightarrow K(A\otimes \mathfrak K(H))$ in $K$-theory. 
\end{prop}

\subsection{Controlled $6$-term exact sequences}
We will describe the $6$-term controlled exact sequence associated to a completely filtered extension of $C^*$-algebras. For any extension of $C^*$-algebras 
\[\begin{tikzcd}[column sep = small]0\arrow{r} & J\arrow{r} & A\arrow{r} & A/J\arrow{r} & 0 \end{tikzcd},\]
we denote $\partial_{J,A}$ the boundary map $K_*(A/J)\rightarrow K_{*+1}(J)$. The reader can find all the proofs and properties of the following results in \cite{OY2}.

\begin{definition}
Let $A$ a filtered $C^*$-algebra and $J\subseteq A$ an ideal. If $J_E = A_E\cap J$, the extension
\[\begin{tikzcd}[column sep = small]0\arrow{r} & J\arrow{r} & A\arrow{r} & A/J\arrow{r} & 0 \end{tikzcd}\]
is said to be completely filtered if the continuous linear bijection $A_E/J_E \hookrightarrow (A_E+J)/J$ induced by the inclusion $A_E\hookrightarrow A$ is a complete isometry, i.e.
\[ \inf_{y\in M_n(J_E)} ||x+y|| = \inf_{y\in M_n(J)} ||x+y||\quad,\forall n\in \N,x\in M_n(A_E),E\in \mathcal E.\]
\end{definition}

\begin{prop}
There exists a control pair $(\alpha_D,k_D)$ such that for any completely filtered extension of $C^*$-algebras
\[\begin{tikzcd}[column sep = small]0\arrow{r} & J\arrow{r} & A\arrow{r} & A/J\arrow{r} & 0 \end{tikzcd}\]
there exists a $(\alpha_D,k_D)$-controlled morphism of odd degree
\[D_{J,A} : \hat K(A/J)\rightarrow \hat K(J)\]
which induces $\partial_{J,A}$ in $K$-theory.
\end{prop}

We will denote 
\begin{itemize}
\item[$\bullet$] $D_A$ the controlled boundary map associated to the completely filtered extension of $C^*$-algebras $0 \rightarrow SA \rightarrow CA \rightarrow A \rightarrow 0 $,
\item[$\bullet$] $D^j_{J,A}$ the restriction of $D_{J,A}$ to $\hat K_j(A/J)\rightarrow \hat K_{j+1}(J)$.
\end{itemize} 

\begin{thm}
There exists a universal control pair $(\lambda,h)$, which does not depend on $\mathcal E$, such that for any completely filtered extension of $C^*$-algebras 
\[\begin{tikzcd}[column sep = small]0\arrow{r} & J\arrow{r}{\iota} & A\arrow{r}{q} & A/J\arrow{r} & 0 \end{tikzcd}\]
the following $6$-term exact sequence is $(\lambda,h)$-exact
\[\begin{tikzcd}[column sep = small]
 \hat K_1(J) \arrow{r}{\iota_*} & \hat K_1(A) \arrow{r}{q_*} & \hat K_1(A/J)\arrow{d}{D^1_{J,A}} \\
 \hat K_0(A/J) \arrow{u}{D^0_{J,A}} & \hat K_0(A) \arrow{l}{q_*} & \hat K_0(J)\arrow{l}{\iota_*}
\end{tikzcd}.\]
\end{thm}

The following remark can be found in \cite{OY2} (remark $3.8$) and will be used to prove functorial properties of the controlled Roe and Kasparov transformations.

\begin{rk}\label{rk3.8}
Let $A$ and $B$ two $\mathcal E$-filtered $C^*$-algebras, and $\phi : A\rightarrow B$ a filtered $*$-homomorphism. Let $I$ and $J$ be respectively ideals in $A$ and $B$ and assume that :
\begin{itemize}
\item[$\bullet$] $0 \rightarrow I \rightarrow A \rightarrow A/ I \rightarrow 0$ and $0 \rightarrow J \rightarrow B \rightarrow B/J \rightarrow 0$ are completely filtered extensions of $C^*$-algebras,
\item[$\bullet$] $\phi(I)\subseteq J$,
\end{itemize}
then $D_{J,B}\circ \tilde\phi_* = \phi_* \circ D_{I,A}$.
\end{rk}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Tensorisation in $KK$-theory}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

If $B$ is a filtered $C^*$-algebra and $A$ any $C^*$-algebra, and if $A\otimes B$ is the spatial tensor product, define, for all $E\in \mathcal E$, $A\otimes B_E)$ as the closure of the algebraic tensor product in $A\otimes B$. Then $(A\otimes B_E)_{E\in\mathcal E}$ defines a filtration of $A\otimes B$. If $\phi : A_1 \rightarrow A_2$ is a $*$-homomorphism, we use the notation $\phi_B$ for the induced $*$-homomorphism $A_1\otimes B\rightarrow A_2\otimes B$. \\

In \cite{kasparovKKNovikov}, G. Kasparov defined a map
\[\tau_B : KK(A_1,A_2)\rightarrow KK(A_1\otimes B, A_2\otimes B)\]
for any $C^*$-algebras $A_1$ and $A_2$, which is compatible with the Kasparov product. Any $z\in KK(A_1,A_2)$ defines a morphism
\[K(A_1\otimes B)\rightarrow K(A_2\otimes B)\]
which is proved in \cite{OY2} to be induced from a controlled morphism. The following theorem is borrowed from \cite{OY2}.\\

\begin{thm}\label{tensorization}
There exists a control pair $(\alpha_\tau,k_\tau)$ such that, for any filtered $C^*$-algebra $B$, any $C^*$-algebras $A_1$ and $A_2$ and any $K$-cycle $z\in KK(A_1,A_2)$, there exists a $(\alpha_\tau,k_\tau)$-controlled morphism $\hat \tau_B : \hat K(A_1\otimes B)\rightarrow \hat K(A_2\otimes B)$
such that :
\begin{itemize}
\item[$\bullet$] $\hat \tau_B(z)$ induces right-multiplication by $\tau_B(z)$ in $K$-theory,
\item[$\bullet$] for any $K$-cycles $z,z'\in KK(A_1,A_2)$, $\hat \tau_B(z+z')=\hat\tau_B(z)+\hat\tau_B(z')$,
\item[$\bullet$] if $\phi : A_1\rightarrow A'_1$ is a $*$-homomorphism, then $\hat\tau_B(\phi^*(z)) =  \hat\tau_B(z)\circ (\phi_B)_*$ for any $z\in KK(A'_1,A_2)$,
\item[$\bullet$] if $\phi : A_2'\rightarrow A_2$ is a $*$-homomorphism, then $\hat\tau_B(\phi_*(z)) = (\phi_B)_*\circ \hat\tau_B(z)$ for any $z\in KK(A_1,A'_2)$,
\item[$\bullet$] $\hat \tau_B([Id_A])\sim_{(\alpha_\tau,k_\tau)} Id_{\hat K(A\otimes B)}$,
\item[$\bullet$] for any $C^*$-algebra $D$, any $K$-cycle $z\in KK(A_1,A_2)$, $\hat\tau_B (\tau_D(z))= \hat\tau_{B\otimes D}(z)$.
\item[$\bullet$] for any semi-split extension $\begin{tikzcd}[column sep = small] 0 \arrow{r}& J \arrow{r} & A \arrow{r} & A/J\arrow{r} & 0\end{tikzcd}$ with boundary element $[\partial_{J,A}]\in KK_1(A/J,J)$, $\hat\tau_B([\partial_{J,A}])=D_{J\otimes B,A\otimes B}$.
\end{itemize}
\end{thm}

This controlled tensorisation map respects Kasparov product. See \cite{OY2} for a proof.

\begin{thm}
There exists a control pair $\lambda$ such that, for any separable $C^*$-algebras $A_1$ and $A_2$, any filtered $C^*$-algebra $B$, the following holds : for any $z\in KK(A_1,A_2)$ and $z'\in KK(A_2,A_3)$,
\[\hat\tau_B(z\otimes z')\sim_\lambda \hat\tau_B(z')\circ\hat\tau_B(z)\]
\end{thm}

This last proposition asserts that the controlled tensorisation map is natural with respect to morphism of filtered $C^*$-algebras. \cite{OY2}

\begin{prop}
Let $B_1$ and $B_2$ be filtered $C^*$-algebras and $(\phi,\rho) :B_1\rightarrow B_2 $ a filtered morphism. Then $ (\phi_{A_2})_*\circ \hat \tau_{B_1}=\hat \tau_{B_2}(z)\circ(\phi_{A_1})_* $ for any $z\in KK(A_1,A_2)$.
\end{prop}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Controlled Bott periodicity}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

We recall in this section how to construct controlled Bott maps. \\

Recall the definition of the Toeplitz extension. Let $v\in \mathcal L(l^2(\N))$ be the unilateral shift on $l^2(\N)$, i.e. $v(e_n) = e_{n+1}$ if $(e_n)_{n\in \N}$ is the canonical basis. Then $v$ is an isometry, i.e. $v^*v = 1$. Let us denote $\mathcal T $ the $C^*$-algebra of $\mathcal L(l^2(\N))$ generated by $v$. Then the sequence of $C^*$-algebras 
\[0\rightarrow \mathfrak K(l^2(\N)) \rightarrow \mathcal T \rightarrow C(\mathbb S) \rightarrow 0 \]
is exact. Set $\mathcal T_0$ the preimage of $C_0(0,1)$ under the last arrow, so that the sequence of $C^*$-algebras
\[0\rightarrow \mathfrak K(l^2(\N)) \rightarrow \mathcal T_0 \rightarrow C_0(0,1) \rightarrow 0 \]
is exact. This last sequence is called the Toeplitz extension, let $T\in KK_1(S, \mathfrak K(l^2(\N)) )$ denotes its boundary.\\

Let us put $S = C_0(0,1)$ and $C= C_0(0,1]$ , so that evaluation at $1$ induces the following exact sequence of $C^*$-algebras $0\rightarrow S \rightarrow C \rightarrow \C \rightarrow  0 $. Let us denote by $[\partial]\in KK_1(\C,S)$ the class in $KK$-theory of this extension. It is called the Bott element, and is invertible in $KK_1(\C,S)$, its inverse being the boundary of the Toeplitz extension (see \cite{OY2}). Recall that the boundary of this extension is given by right Kasparov product by $[\partial]$.\\ 

For any $C^*$-algebra $A$, we can tensorize the previous extension by $A$ to have an exact sequence $0\rightarrow SA \rightarrow CA \rightarrow A \rightarrow  0 $. Its class in $KK$-theory, denoted $[\partial_{A}]\in KK_1(A,SA)$, actually satisfies $\tau_A([\partial ]) =[\partial_{A}]$. Let us denote $\partial_A : K_*(A)\rightarrow K_*(SA)$ the odd degree boundary homomorphism of the extension, it is induced by right multiplication by $[\partial_A]$. It is also invertible, as we can tensorize the Toeplitz extension to get the following exact sequence of $C^*$-algebras
\[0\rightarrow \mathfrak K(l^2(\N))\otimes A \rightarrow \mathcal T_0 \otimes A \rightarrow SA \rightarrow 0 \]
whose boundary element $T_A =[\partial_{\mathcal T_0 \otimes A }]\in KK_1(SA,\mathfrak K(l^2(\N))\otimes A)$ satisfies $\tau_A(T)= T_A$. As $\tau_A$ respects Kasparov product, one can see that $[\partial_A]$ and $T_A$ are mutual inverse.\\

Tensorization by $S$ and $C$ is functorial with respect to $*$-homomorphisms, and if $g : A\rightarrow B$ is a $*$-homomorphism, we denote $Sg : SA\rightarrow SB$ and $Cg : CA\rightarrow CB$ the induced $*$-homomorphisms. By naturality of boundary maps w.r.t. extensions, we get the following relation :
\[(Sg)_*[\partial_{SA}] = [\partial_{SA}]\otimes_{SA} [Sg] = [g]\otimes_{B} [\partial_{SB}] = g^*[\partial_{SB}] .\]

We can actually construct controlled morphisms $D_{A} :\hat K_0(A)\rightarrow \hat K_{1}(SA)$ and $Z_A :\hat K_1(SA)\rightarrow \hat K_{0}(A\otimes \mathfrak K)$ that induce right-multiplication by $[\partial_A]$ and $T_A$ respectively, i.e.
\[\iota_{\varepsilon,E}\circ D_A(x) = \kappa_0(x) \otimes [\partial_A]\quad \iota_{\varepsilon,E}\circ Z_A(y) = \kappa_1(y) \otimes T_A \quad \forall x\in K_0^{\varepsilon, E}(A),y\in K_1^{\varepsilon, E}(SA). \]

Recall that, if $A$ is unital and $p$ is a projection in $A$, $\partial_A [p]$ is given by the homotopy class of the path of unitaries 
\[\left\{\begin{array}{rcl} [0,1] & \rightarrow & U(\tilde{SA}) \\ t & \mapsto & e^{2i\pi t}p + 1-p\end{array}\right.\]
One can perform a similar construction in term of almost-projections. Let $q\in P_n^{\varepsilon,E}(A)$ and $l$ an integer, define 
\[V_{q,l}(t) = \text{diag }(e^{-2i\pi l t}, 1, 1,...,1) \ (e^{2i\pi t}q +1-q)\in U^{5\varepsilon,E}_n(\tilde{SA}),\]
then 
\[\left\{\begin{array}{rcl} 
K_0^{\varepsilon,E}(A) & \rightarrow & K_1^{\varepsilon,E}(SA) \\ 
\ [q,l]_{\varepsilon,E} & \mapsto & [V_{q,l}]_{5\varepsilon,E}
\end{array}\right.\]
defines a $(5,\textbf{1})$-controlled morphism $Z_A : \hat K_0(A)\rightarrow \hat K_1(SA)$, where $\textbf{1}$ is the constant function $\textbf{1}_\varepsilon(E) = 1$, $\forall E\in\mathcal E$.

\begin{prop}[\cite{OY2} Prop. $3.9$ and $3.10$]
Let $A$ be a unital $C^*$-algebra. There exist universal control pairs $(\lambda,h)$ and $(\lambda',h')$ such that 
\[\begin{array}{c} D^0_A \sim_{(\lambda,h)} Z_A \quad \text{and}\\
D^1_{ \mathfrak K(l^2(\N)) \otimes A,\mathcal T_0\otimes A}\circ Z_A\sim_{(\lambda',h')} \mathcal M_A \end{array}\]
where $\mathcal M_A$ is the controlled Morita equivalence.
\end{prop}





